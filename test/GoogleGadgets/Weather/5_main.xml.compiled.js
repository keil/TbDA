
function oa(){this.forecasts=[];this.isProblem=false}oa.prototype.b=function(){if(this.unitSystem=="SI"){return true}return false};var Qa;function Ob(a,b){var c=I+"ig/api?hl="+a;if(a=="ja"){c+="&host=www.google.co.jp"}for(var d=0;d<b.locationList.length;++d){var e=b.locationList[d];c+="&weather=";switch(e.type){case s.ZIP:c+=e.value;break;case s.LATLONG:c+=",,,"+e.value;break;case s.CITY:c+=e.value;break;default:debug.error("Invalid location type = "+e.type);break}}debug.trace("URL: "+c);return c}
var Nb=10000;function Qb(a,b,c,d){var e=Ob(a,b),g=new XMLHttpRequest;g.onreadystatechange=m;g.open("GET",e,true);g.send();var l=view.setTimeout(function(){if(g){g.abort();g=null}d()},Nb);function m(){if(g.readyState!=4){return}view.clearTimeout(l);if(g.status==200){Pb(g.responseXML,b,c,d)}else{if(d){d()}}g=null}}function Pb(a,b,c,d){var e=[];try{var g=a.getElementsByTagName("weather");if(g.length!=b.locationList.length){debug.error("Weather results and profile location lengths do not match");if(d){d()}}for(var l=
0;l<g.length;++l){var m=g[l],j=new oa,r=m.getElementsByTagName("problem_cause");if(r&&r.length==1){j.name=b.locationList[l].name;j.isProblem=true;e.push(j);continue}var w=m.getElementsByTagName("forecast_information")[0];j.name=b.locationList[l].name;j.city=q(w,"city");j.postalCode=q(w,"postal_code");j.latitude=q(w,"latitude_e6");j.longitude=q(w,"longitude_e6");var B=q(w,"forecast_date").split(/-/);j.date=new Date(B[0],B[1]-1,B[2]);j.unitSystem=q(w,"unit_system");var v=m.getElementsByTagName("current_conditions")[0];
j.currentCondition=q(v,"condition");j.currentTempC=q(v,"temp_c");j.currentTempF=q(v,"temp_f");j.currentIcon=q(v,"icon");j.currentWind=q(v,"wind_condition");j.currentHumidity=q(v,"humidity");var Q=m.getElementsByTagName("forecast_conditions");for(var A=0;A<Q.length;++A){var G=Q[A];j.forecasts[A]={high:q(G,"high"),low:q(G,"low"),day:q(G,"day_of_week"),icon:q(G,"icon"),condition:q(G,"condition")}}e.push(j)}}catch(Z){debug.error("weather_parsedata: "+Z.message);if(d){d(Z)}}Qa=e;c(Qa)};
