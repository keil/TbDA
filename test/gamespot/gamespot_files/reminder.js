function reminderBuilder(){this.init=function(){this.reminderDom=new Object;this.reminderIds=new Object;this.user="pete";var A=this;var B=$$("a[rel^=reminder_toggle]");B.each(function(D){D.setStyle("visibility","visible");var C=D.getJSONData().reminder;D.addEvent("click",function(E){A.checkReminders(C.id,true);E.stop();});A.addReminder(C.user,C.domId,C.id,C.classNotSet,C.classSet,C.textNotSet,C.textSet);});this.checkReminders();},this.addReminder=function(D,H,C,A,F,E,B){this.user=D;var G=document.getElementById(H);
this.reminderDom[H]={domEle:G,reminderId:C,classSet:F,classNotSet:A,textSet:B,textNotSet:E};this.reminderIds[C]=C;},this.checkReminders=function(G,D){var E=this.reminderDom;var F=D==true?"&delete=1":"";var C=Math.floor(Math.random()*10000+1);var B=G?G:"";if(!B){for(i in this.reminderIds){B+=i+",";}B=B.substr(0,B.length-1);}if(B.length==0){return ;}var A="/pages/ajax/reminder_process.php?user_id=";A+=this.user+"&event_id="+B+"&rand="+C+F;new Request.JSON({url:A,method:"get",onComplete:(function(H){if(typeof (H)=="object"){for(r in this.reminderDom){this.styleReminder(H[this.reminderDom[r].reminderId],this.reminderDom[r]);
}}}).bind(this)}).send();},this.styleReminder=function(F,D){if(F==1||F==0){var G=(F==1)?D.classSet:D.classNotSet;var B=(F==1)?D.classNotSet:D.classSet;var A=(F==1)?D.textSet:D.textNotSet;var E=$(D.domEle);var C=E.get("tween",{duration:250});C.start("opacity",0.999999,0).chain(function(){E.set("html",A);E.removeClass(B).addClass(G);C.start("opacity",0,0.999999);});}};}reminderObj=new reminderBuilder();reminderObj.init();