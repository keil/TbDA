(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}
if(p==this){return false;}
var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}
if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);;(function(d){var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:'xy',duration:parseFloat(d.fn.jquery)>=1.3?0:1};k.window=function(a){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||d.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||e.compatMode=='BackCompat'?e.body:e.documentElement})};d.fn.scrollTo=function(n,j,b){if(typeof j=='object'){b=j;j=0}if(typeof b=='function')b={onAfter:b};if(n=='max')n=9e9;b=d.extend({},k.defaults,b);j=j||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;if(b.queue)j/=2;b.offset=p(b.offset);b.over=p(b.over);return this._scrollable().each(function(){var q=this,r=d(q),f=n,s,g={},u=r.is('html,body');switch(typeof f){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case'object':if(f.is||f.style)s=(f=d(f)).offset()}d.each(b.axis.split(''),function(a,i){var e=i=='x'?'Left':'Top',h=e.toLowerCase(),c='scroll'+e,l=q[c],m=k.max(q,i);if(s){g[c]=s[h]+(u?0:l-r.offset()[h]);if(b.margin){g[c]-=parseInt(f.css('margin'+e))||0;g[c]-=parseInt(f.css('border'+e+'Width'))||0}g[c]+=b.offset[h]||0;if(b.over[h])g[c]+=f[i=='x'?'width':'height']()*b.over[h]}else{var o=f[h];g[c]=o.slice&&o.slice(-1)=='%'?parseFloat(o)/100*m:o}if(/^\d+$/.test(g[c]))g[c]=g[c]<=0?0:Math.min(g[c],m);if(!a&&b.queue){if(l!=g[c])t(b.onAfterFirst);delete g[c]}});t(b.onAfter);function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}}).end()};k.max=function(a,i){var e=i=='x'?'Width':'Height',h='scroll'+e;if(!d(a).is('html,body'))return a[h]-d(a)[e.toLowerCase()]();var c='client'+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])};function p(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);(function($){$.fn.lazyload=function(options){var defaults={event:null,eventsource:null,finalimg:null,finalimgattr:null,placeholder:null,pngfix:false,transition:'none'};var $this=$(this);var options=$.extend(defaults,options);if(!options.event)return;var finalimgattr='alt';if(options.finalimgattr)
finalimgattr=options.finalimgattr;var madlazy=lazyLoadMain;for(var i=0;i<this.length;i++)
madlazy($(this[i]),options);};function lazyLoadMain(element,options){var finalimgattr='alt';if(options.finalimgattr)
finalimgattr=options.finalimgattr;if(!element.attr(finalimgattr)&&!options.finalimg)return;if(options.placeholder)
element.attr("src",options.placeholder);element.data('loaded',false);var eventsource=options.eventsource;if(!eventsource)
eventsource=element;var target=element;if(options.event!='manual'){eventsource.bind(options.event,function(event){if(!target.data('loaded'))
target.trigger("appear");});}
element.one("appear",function(){var $this=$(this);if(options.transition=='fade')$this.hide();if(!$this.data('loaded')){$("<img />").bind("load",function(){$this.hide().attr("src",$this.finalimgattr);$this.data('loaded',true);}).attr("src",$this.finalimgattr);if(options.finalimg)
$this.attr("src",finalimg);else
$this.attr("src",$this.attr(finalimgattr));$this.attr(finalimgattr,"");if(options.transition=='fade')
{if($.browser.msie&&$.browser.version.substr(0,1)<7)
{$this.show();}
else
{$this.fadeIn(2000);}}}
$this.data('loaded',true);if(options.pngfix){if($.fn.pngfix&&$.browser.msie&&$.browser.version.substr(0,1)<7)
$this.pngfix();}});return element;};})(jQuery);(function(e){function n(f,c){var a=e(c);return a.length<2?a:f.parent().find(c)}function t(f,c){var a=this,l=f.add(a),g=f.children(),k=0,m=c.vertical;j||(j=a);if(g.length>1)g=e(c.items,f);e.extend(a,{getConf:function(){return c},getIndex:function(){return k},getSize:function(){return a.getItems().size()},getNaviButtons:function(){return o.add(p)},getRoot:function(){return f},getItemWrap:function(){return g},getItems:function(){return g.children(c.item).not("."+c.clonedClass)},move:function(b,d){return a.seekTo(k+
b,d)},next:function(b){return a.move(1,b)},prev:function(b){return a.move(-1,b)},begin:function(b){return a.seekTo(0,b)},end:function(b){return a.seekTo(a.getSize()-1,b)},focus:function(){return j=a},addItem:function(b){b=e(b);if(c.circular){e(".cloned:last").before(b);e(".cloned:first").replaceWith(b.clone().addClass(c.clonedClass))}else g.append(b);l.trigger("onAddItem",[b]);return a},seekTo:function(b,d,h){if(c.circular&&b===0&&k==-1&&d!==0)return a;if(!c.circular&&b<0||b>a.getSize()||b<-1)return a;var i=b;if(b.jquery)b=a.getItems().index(b);else i=a.getItems().eq(b);var q=e.Event("onBeforeSeek");if(!h){l.trigger(q,[b,d]);if(q.isDefaultPrevented()||!i.length)return a}i=m?{top:-i.position().top}:{left:-i.position().left};k=b;j=a;if(d===undefined)d=c.speed;g.animate(i,d,c.easing,h||function(){l.trigger("onSeek",[b])});return a}});e.each(["onBeforeSeek","onSeek","onAddItem"],function(b,d){e.isFunction(c[d])&&e(a).bind(d,c[d]);a[d]=function(h){e(a).bind(d,h);return a}});if(c.circular){var r=a.getItems().slice(-1).clone().prependTo(g),s=a.getItems().eq(1).clone().appendTo(g);r.add(s).addClass(c.clonedClass);a.onBeforeSeek(function(b,d,h){if(!b.isDefaultPrevented())if(d==-1){a.seekTo(r,h,function(){a.end(0)});return b.preventDefault()}else d==a.getSize()&&a.seekTo(s,h,function(){a.begin(0)})});a.seekTo(0,0)}var o=n(f,c.prev).click(function(){a.prev()}),p=n(f,c.next).click(function(){a.next()});!c.circular&&a.getSize()>1&&a.onBeforeSeek(function(b,d){o.toggleClass(c.disabledClass,d<=0);p.toggleClass(c.disabledClass,d>=a.getSize()-
1)});c.mousewheel&&e.fn.mousewheel&&f.mousewheel(function(b,d){if(c.mousewheel){a.move(d<0?1:-1,c.wheelSpeed||50);return false}});c.keyboard&&e(document).bind("keydown.scrollable",function(b){if(!(!c.keyboard||b.altKey||b.ctrlKey||e(b.target).is(":input")))if(!(c.keyboard!="static"&&j!=a)){var d=b.keyCode;if(m&&(d==38||d==40)){a.move(d==38?-1:1);return b.preventDefault()}if(!m&&(d==37||d==39)){a.move(d==37?-1:1);return b.preventDefault()}}});e(a).trigger("onBeforeSeek",[c.initialIndex])}e.tools=e.tools||{version:"1.2.2"};e.tools.scrollable={conf:{activeClass:"active",circular:false,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:true,mousewheel:false,next:".next",prev:".prev",speed:400,vertical:false,wheelSpeed:0}};var j;e.fn.scrollable=function(f){var c=this.data("scrollable");if(c)return c;f=e.extend({},e.tools.scrollable.conf,f);this.each(function(){c=new t(e(this),f);e(this).data("scrollable",c)});return f.api?c:this}})(jQuery);(function(a){function t(d,b){var c=this,i=d.add(c),o=a(window),k,f,m,g=a.tools.expose&&(b.mask||b.expose),n=Math.random().toString().slice(10);if(g){if(typeof g=="string")g={color:g};g.closeOnClick=g.closeOnEsc=false}var p=b.target||d.attr("rel");f=p?a(p):d;if(!f.length)throw"Could not find Overlay: "+p;d&&d.index(f)==-1&&d.click(function(e){c.load(e);return e.preventDefault()});a.extend(c,{load:function(e){if(c.isOpened())return c;var h=q[b.effect];if(!h)throw'Overlay: cannot find effect : "'+b.effect+'"';b.oneInstance&&a.each(s,function(){this.close(e)});e=e||a.Event();e.type="onBeforeLoad";i.trigger(e);if(e.isDefaultPrevented())return c;m=true;g&&a(f).expose(g);var j=b.top,r=b.left,u=f.outerWidth({margin:true}),v=f.outerHeight({margin:true});if(typeof j=="string")j=j=="center"?Math.max((o.height()-v)/2,0):parseInt(j,10)/100*o.height();if(r=="center")r=Math.max((o.width()-u)/2,0);h[0].call(c,{top:j,left:r},function(){if(m){e.type="onLoad";i.trigger(e)}});g&&b.closeOnClick&&a.mask.getMask().one("click",c.close);b.closeOnClick&&a(document).bind("click."+n,function(l){a(l.target).parents(f).length||c.close(l)});b.closeOnEsc&&a(document).bind("keydown."+n,function(l){l.keyCode==27&&c.close(l)});return c},close:function(e){if(!c.isOpened())return c;e=e||a.Event();e.type="onBeforeClose";i.trigger(e);if(!e.isDefaultPrevented()){m=false;q[b.effect][1].call(c,function(){e.type="onClose";i.trigger(e)});a(document).unbind("click."+n).unbind("keydown."+n);g&&a.mask.close();return c}},getOverlay:function(){return f},getTrigger:function(){return d},getClosers:function(){return k},isOpened:function(){return m},getConf:function(){return b}});a.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(e,h){a.isFunction(b[h])&&a(c).bind(h,b[h]);c[h]=function(j){a(c).bind(h,j);return c}});k=f.find(b.close||".close");if(!k.length&&!b.close){k=a('<div class="close"></div>');f.prepend(k)}k.click(function(e){c.close(e)});b.load&&c.load()}a.tools=a.tools||{version:"1.2.2"};a.tools.overlay={addEffect:function(d,b,c){q[d]=[b,c]},conf:{close:null,closeOnClick:true,closeOnEsc:false,closeSpeed:"fast",effect:"default",fixed:!a.browser.msie||a.browser.version>6,left:"center",load:false,mask:null,oneInstance:true,speed:"normal",target:null,top:"10%"}};var s=[],q={};a.tools.overlay.addEffect("default",function(d,b){var c=this.getConf(),i=a(window);if(!c.fixed){d.top+=i.scrollTop();d.left+=i.scrollLeft()}d.position=c.fixed?"fixed":"absolute";this.getOverlay().css(d).fadeIn(c.speed,b)},function(d){this.getOverlay().fadeOut(this.getConf().closeSpeed,d)});a.fn.overlay=function(d){var b=this.data("overlay");if(b)return b;if(a.isFunction(d))d={onBeforeLoad:d};d=a.extend(true,{},a.tools.overlay.conf,d);this.each(function(){b=new t(a(this),d);s.push(b);a(this).data("overlay",b)});return d.api?b:this}})(jQuery);(function($){$.fn.pixeltruncate=function(options){var defaults={container:null,lookup:'brute',checkcontainer:null,fontfamily:null,fontsize:null,pixellimit:0,tstring:"...",numlines:1,truncfullwords:false,asiancharset:false};var options=$.extend(defaults,options);if(options.pixellimit<=0&&!options.container)
options.container=this.parent();if(!options.fontfamily)
options.fontfamily=this.css('fontFamily');if(!options.fontsize)
options.fontsize=this.css('fontSize');if(options.numlines>1)
options.truncfullwords=true;if(options.asiancharset==true)
options.truncfullwords=false;var returnval=0;for(var i=0;i<this.length;i++){var val=pixelTruncateMain($(this[i]),options);if(val>returnval)
returnval=val;}
return returnval;};$.fn.pixelinitalphabet=function(container,fontfamily,fontsize){fontfamily=fontfamily.split(',')[0].toLowerCase();fontsize=parseInt(fontsize,10);var text="<p id='container_dict' style='font-size: "+fontsize+"px; font-family: "+fontfamily+"; display: inline;'>";text+="<span>a</span><span>b</span><span>c</span><span>d</span><span>e</span><span>f</span><span>g</span><span>h</span><span>i</span><span>j</span>"+"<span>k</span><span>l</span><span>m</span><span>n</span><span>o</span><span>p</span><span>q</span><span>r</span><span>s</span><span>t</span>"+"<span>u</span><span>v</span><span>w</span><span>x</span><span>y</span><span>z</span><span>1</span><span>2</span><span>3</span><span>4</span>"+"<span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>0</span><span>.</span><span>,</span><span>...</span><span>. .</span>";text+="</p>";var cufonset=(fontfamily=='futura'&&typeof Cufon=='function');if(!cufonset)
container.html(text);var con=$('#container_dict');var chars=con.children();var prefix=(fontfamily+fontsize).toLowerCase();for(var i=0;i<chars.length;i++){var current=$(chars[i]);var currenttext=current.text();var currentlength;if(cufonset){if(fontsize==12){currenttext=8;if(/[abdghnopq0-9]/.test(currenttext))
currentlength=8;if(/[csvxyz]/.test(currenttext))
currentlength=6;if(/[eku]/.test(currenttext))
currentlength=7;if(/[fijlt]/.test(currenttext))
currentlength=4;if(/[m]/.test(currenttext))
currentlength=11;if(/[r]/.test(currenttext))
currentlength=5;if(/[w]/.test(currenttext))
currentlength=5;}}
if(currenttext=='. .'){currenttext='_';var largerlength=current.width();var periodlength=$($.fn.pixeltruncate.arrayele).data(prefix+'.');if(typeof periodlength=='number')
currentlength=largerlength-periodlength*2;}
else
currentlength=current.width();$($.fn.pixeltruncate.arrayele).data(prefix+currenttext,currentlength);}};$.fn.pixeltruncate.arrayele='body';function pixelTruncateMain(element,options){var maxwidth=options.pixellimit;if(options.container)
maxwidth=options.container.width();var textdisplay=element.css('display');var textwspace=element.css('whiteSpace');var textwidth=element.css({display:'inline',whiteSpace:'nowrap'}).width();element.css({display:textdisplay,whiteSpace:textwspace});if(textwidth==0&&options.checkcontainer&&options.fontfamily&&options.fontsize){options.fontfamily=options.fontfamily.split(',')[0].toLowerCase();options.fontsize=parseInt(options.fontsize,10);options.checkcontainer.css({display:'inline',fontSize:options.fontsize,fontFamily:options.fontfamily,visibility:'hidden'});options.checkcontainer.html(element.html());textwidth=options.checkcontainer.width();}
var textpercentage=textwidth/maxwidth;if(textpercentage<1)return textwidth;var textfamily=element.css('fontFamily').split(',')[0];var textsize=parseInt(element.css('fontSize'),10);var prefix=(textfamily+textsize).toLowerCase();var finaltext="";if(options.lookup=='dictionary'){var tstringwidth=$($.fn.pixeltruncate.arrayele).data(prefix+options.tstring);if(tstringwidth>maxwidth){element.html(finaltext);}
else{var origtext=element.html();var splittext=origtext.split("");var lengthleft=maxwidth-tstringwidth;var i;for(i=0;i<splittext.length;i++){var currchar=splittext[i].toLowerCase();if(currchar==" ")
currchar="_";var charlength=$($.fn.pixeltruncate.arrayele).data(prefix+currchar);if(typeof charlength=='number')
lengthleft-=charlength;if(lengthleft<=0)break;}
var finaltext=origtext.substring(0,i)+options.tstring;element.html(finaltext);}}
else{if(!options.checkcontainer||!options.fontfamily||!options.fontsize)return;options.fontfamily=options.fontfamily.split(',')[0].toLowerCase();options.fontsize=parseInt(options.fontsize,10);var origtext=$.trim(element.html());origtext=origtext.replace(/\&[^g]+(\w)*;/ig,' ');var finaltext="";var numlines=options.numlines;var tstring;while(numlines>0){if(numlines>1)
tstring="";else
tstring=options.tstring;var lastchar=pixelTruncateSingleLine(origtext,maxwidth,tstring,options);if(lastchar==origtext.length)
numlines==0;finaltext+=$.trim(origtext.substring(0,lastchar));if(numlines>1)
finaltext+="<br/>";origtext=$.trim(origtext.substring(lastchar));numlines--;}
if(origtext.length>0)
finaltext+=options.tstring;element.html(finaltext);}
return finaltext.length;};function pixelTruncateSingleLine(origtext,maxwidth,tstring,options){if(options.fontfamily=='futura'&&typeof Cufon=='function'){var splittext=origtext.split("");var tstringwidth=11;if(options.fontsize==12)
tstringwidth=12;if(options.fontsize==15)
tstringwidth=15;if(tstring=="")
tstringwidth=0;var lengthleft=maxwidth-tstringwidth;var i;var lastwordindex=0;for(i=0;i<splittext.length;i++){var currchar=splittext[i];if(currchar!='G'&&currchar!='D')
currchar=currchar.toLowerCase();var charlength=8;if(options.fontsize==22){charlength=11;if(/[abdghnopq]/.test(currchar))
charlength=13;if(/[cekv]/.test(currchar))
charlength=11;if(/[ijlt]/.test(currchar))
charlength=6;if(/[fhnuxyz]/.test(currchar))
charlength=12;if(/[m]/.test(currchar))
charlength=18;if(/[r]/.test(currchar))
charlength=8;if(/[s]/.test(currchar))
charlength=9;if(/[w]/.test(currchar))
charlength=17;if(/[G]/.test(currchar))
charlength=19;if(/[D]/.test(currchar))
charlength=16;if(/[0-9]/.test(currchar))
charlength=14;if(/\s/.test(currchar)){charlength=8;lastwordindex=i;}}
if(options.fontsize==15){if(/[abdghnopq0-9]/.test(currchar))
charlength=9;if(/[csvxyz]/.test(currchar))
charlength=7;if(/[eku]/.test(currchar))
charlength=8;if(/[fjlt]/.test(currchar))
charlength=5;if(/[i]/.test(currchar))
charlength=4;if(/[G]/.test(currchar))
charlength=13;if(/[D]/.test(currchar))
charlength=11;if(/\s/.test(currchar)){charlength=4;lastwordindex=i;}}
if(options.fontsize==12){if(/[abdghnopq0-9]/.test(currchar))
charlength=8;if(/[csvxyz]/.test(currchar))
charlength=6;if(/[eku]/.test(currchar))
charlength=7;if(/[fijlt]/.test(currchar))
charlength=4;if(/[m]/.test(currchar))
charlength=11;if(/[r]/.test(currchar))
charlength=5;if(/[w]/.test(currchar))
charlength=10;if(/[G]/.test(currchar))
charlength=11;if(/[D]/.test(currchar))
charlength=9;if(/\s/.test(currchar)){charlength=3;lastwordindex=i;}}
if(options.fontsize==11){if(/[abdeghnopqu0-9]/.test(currchar))
charlength=7;if(/[ckvxyz]/.test(currchar))
charlength=6;if(/[ft]/.test(currchar))
charlength=4;if(/[ijl]/.test(currchar))
charlength=3;if(/[m]/.test(currchar))
charlength=10;if(/[sr]/.test(currchar))
charlength=5;if(/[w]/.test(currchar))
charlength=9;if(/[G]/.test(currchar))
charlength=10;if(/[D]/.test(currchar))
charlength=8;if(/\s/.test(currchar)){charlength=3;lastwordindex=i;}}
lengthleft-=charlength;if(lengthleft<=0)break;}
if(lastwordindex==0)
lastwordindex=i;if(options.truncfullwords&&lengthleft<=0)
return lastwordindex;else
return i;}
else{options.checkcontainer.css({display:'inline',fontSize:options.fontsize,fontFamily:options.fontfamily,visibility:'hidden'});options.checkcontainer.html(tstring);var tstringwidth=options.checkcontainer.width();if(tstringwidth>maxwidth){return 0;}
else{var finaltext="";var i=origtext.length;var lastwordindex=i;var pixeltruncindex=i;while(i>0){options.checkcontainer.html(origtext.substring(0,i)+tstring);var currlength=options.checkcontainer.width();if(currlength<maxwidth){if(pixeltruncindex==origtext.length)
pixeltruncindex=i;if(!options.truncfullwords)
break;if(options.truncfullwords&&((i==origtext.length)||(origtext.substring(0,i).indexOf(' ')==-1)||(i>0&&origtext.charAt(i-1)==' '))){lastwordindex=i;break;}}
i--;}
if(options.truncfullwords)
return lastwordindex;else
return pixeltruncindex;}}}})(jQuery);;(function($){$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
if(typeof options=='function')
options={success:options};var url=$.trim(this.attr('action'));if(url){url=(url.match(/^([^#]+)/)||[])[1];}
url=url||window.location.href||'';options=$.extend({url:url,type:this.attr('method')||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options||{});var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var a=this.formToArray(options.semantic);if(options.data){options.extraData=options.data;for(var n in options.data){if(options.data[n]instanceof Array){for(var k in options.data[n])
a.push({name:n,value:options.data[n][k]});}
else
a.push({name:n,value:options.data[n]});}}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a);if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else
options.data=q;var $form=this,callbacks=[];if(options.resetForm)callbacks.push(function(){$form.resetForm();});if(options.clearForm)callbacks.push(function(){$form.clearForm();});if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){$(options.target).html(data).each(oldSuccess,arguments);});}
else if(options.success)
callbacks.push(options.success);options.success=function(data,status){for(var i=0,max=callbacks.length;i<max;i++)
callbacks[i].apply(options,[data,status,$form]);};var files=$('input:file',this).fieldValue();var found=false;for(var j=0;j<files.length;j++)
if(files[j])
found=true;var multipart=false;if((files.length&&options.iframe!==false)||options.iframe||found||multipart){if(options.closeKeepAlive)
$.get(options.closeKeepAlive,fileUpload);else
fileUpload();}
else
$.ajax(options);this.trigger('form-submit-notify',[this,options]);return this;function fileUpload(){var form=$form[0];if($(':input[name=submit]',form).length){alert('Error: Form elements must not be named "submit".');return;}
var opts=$.extend({},$.ajaxSettings,options);var s=$.extend(true,{},$.extend(true,{},$.ajaxSettings),opts);var id='jqFormIO'+(new Date().getTime());var $io=$('<iframe id="'+id+'" name="'+id+'" src="'+opts.iframeSrc+'" />');var io=$io[0];$io.css({position:'absolute',top:'-1000px',left:'-1000px'});var xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;$io.attr('src',opts.iframeSrc);}};var g=opts.global;if(g&&!$.active++)$.event.trigger("ajaxStart");if(g)$.event.trigger("ajaxSend",[xhr,opts]);if(s.beforeSend&&s.beforeSend(xhr,s)===false){s.global&&$.active--;return;}
if(xhr.aborted)
return;var cbInvoked=0;var timedOut=0;var sub=form.clk;if(sub){var n=sub.name;if(n&&!sub.disabled){options.extraData=options.extraData||{};options.extraData[n]=sub.value;if(sub.type=="image"){options.extraData[name+'.x']=form.clk_x;options.extraData[name+'.y']=form.clk_y;}}}
setTimeout(function(){var t=$form.attr('target'),a=$form.attr('action');form.setAttribute('target',id);if(form.getAttribute('method')!='POST')
form.setAttribute('method','POST');if(form.getAttribute('action')!=opts.url)
form.setAttribute('action',opts.url);if(!options.skipEncodingOverride){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(opts.timeout)
setTimeout(function(){timedOut=true;cb();},opts.timeout);var extraInputs=[];try{if(options.extraData)
for(var n in options.extraData)
extraInputs.push($('<input type="hidden" name="'+n+'" value="'+options.extraData[n]+'" />').appendTo(form)[0]);$io.appendTo('body');io.attachEvent?io.attachEvent('onload',cb):io.addEventListener('load',cb,false);form.submit();}
finally{form.setAttribute('action',a);t?form.setAttribute('target',t):$form.removeAttr('target');$(extraInputs).remove();}},10);var domCheckCount=50;function cb(){if(cbInvoked++)return;io.detachEvent?io.detachEvent('onload',cb):io.removeEventListener('load',cb,false);var ok=true;try{if(timedOut)throw'timeout';var data,doc;doc=io.contentWindow?io.contentWindow.document:io.contentDocument?io.contentDocument:io.document;var isXml=opts.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&(doc.body==null||doc.body.innerHTML=='')){if(--domCheckCount){cbInvoked=0;setTimeout(cb,100);return;}
log('Could not access iframe DOM after 50 tries.');return;}
xhr.responseText=doc.body?doc.body.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;xhr.getResponseHeader=function(header){var headers={'content-type':opts.dataType};return headers[header];};if(opts.dataType=='json'||opts.dataType=='script'){var ta=doc.getElementsByTagName('textarea')[0];if(ta)
xhr.responseText=ta.value;else{var pre=doc.getElementsByTagName('pre')[0];if(pre)
xhr.responseText=pre.innerHTML;}}
else if(opts.dataType=='xml'&&!xhr.responseXML&&xhr.responseText!=null){xhr.responseXML=toXml(xhr.responseText);}
data=$.httpData(xhr,opts.dataType);}
catch(e){ok=false;$.handleError(opts,xhr,'error',e);}
if(ok){opts.success(data,'success');if(g)$.event.trigger("ajaxSuccess",[xhr,opts]);}
if(g)$.event.trigger("ajaxComplete",[xhr,opts]);if(g&&!--$.active)$.event.trigger("ajaxStop");if(opts.complete)opts.complete(xhr,ok?'success':'error');setTimeout(function(){$io.remove();xhr.responseXML=null;},100);};function toXml(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else
doc=(new DOMParser()).parseFromString(s,'text/xml');return(doc&&doc.documentElement&&doc.documentElement.tagName!='parsererror')?doc:null;};};};$.fn.ajaxForm=function(options){return this.ajaxFormUnbind().bind('submit.form-plugin',function(){$(this).ajaxSubmit(options);return false;}).bind('click.form-plugin',function(e){var target=e.target;var $el=$(target);if(!($el.is(":submit,input:image"))){var t=$el.closest(':submit');if(t.length==0)
return;target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!=undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);});};$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic){var a=[];if(this.length==0)return a;var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els)return a;for(var i=0,max=els.length;i<max;i++){var el=els[i];var n=el.name;if(!n)continue;if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el){a.push({name:n,value:$(el).val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
var v=$.fieldValue(el,true);if(v&&v.constructor==Array){for(var j=0,jmax=v.length;j<jmax;j++)
a.push({name:n,value:v[j]});}
else if(v!==null&&typeof v!='undefined')
a.push({name:n,value:v});}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0],n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n)return;var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++)
a.push({name:n,value:v[i]});}
else if(v!==null&&typeof v!='undefined')
a.push({name:this.name,value:v});});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length))
continue;v.constructor==Array?$.merge(val,v):val.push(v);}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(typeof successful=='undefined')successful=true;if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1))
return null;if(tag=='select'){var index=el.selectedIndex;if(index<0)return null;var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v)
v=(op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;if(one)return v;a.push(v);}}
return a;}
return el.value;};$.fn.clearForm=function(){return this.each(function(){$('input,select,textarea',this).clearFields();});};$.fn.clearFields=$.fn.clearInputs=function(){return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(t=='text'||t=='password'||tag=='textarea')
this.value='';else if(t=='checkbox'||t=='radio')
this.checked=false;else if(tag=='select')
this.selectedIndex=-1;});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType))
this.reset();});};$.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select==undefined)select=true;return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio')
this.checked=select;else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};function log(){if($.fn.ajaxSubmit.debug&&window.console&&window.console.log)
window.console.log('[jquery.form] '+Array.prototype.join.call(arguments,''));};})(jQuery);(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var validator=$.data(this[0],'validator');if(validator){return validator;}validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){validator.submitButton=this;});}this.submit(function(event){if(validator.settings.debug)event.preventDefault();function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}return false;}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});}return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend({},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1)return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!=Array){params=[params];}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"field_with_errors",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.errorsFor(element).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)this.element(element);else if(element.parentNode.name in this.submitted)this.element(element.parentNode)},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass);},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"",remote:"",email:"",url:"",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format(""),minlength:$.validator.format(""),rangelength:$.validator.format(""),range:$.validator.format(""),max:$.validator.format(""),min:$.validator.format("")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator");validator.settings["on"+event.type]&&validator.settings["on"+event.type].call(validator,this[0]);}$(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",delegate).delegate("click",":radio, :checkbox, select, option",delegate);if(this.settings.invalidHandler)$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus();}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name)[0];}var rules=$(element).rules();var dependencyMismatch=false;for(method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method",e);throw e;}}if(dependencyMismatch)return;if(this.objectLength(rules))this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)return arguments[i];}return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message=="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=jQuery.format(message.replace(theregex,'{$1}'),rule.parameters);}this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(label).length)this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')==name});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))return this.findByName(element.name).filter(':checked').length;}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}if(rules.messages){delete rules.messages}return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var val=$(element).val();return val&&val.length>0;case'input':if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param=="string"&&{url:param}||param;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=(previous.message=response||validator.defaultMessage(element,"remote"));errors[element.name]=$.isFunction(message)?message(value):message;validator.showErrors(errors);}previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";}else if(this.pending[element.name]){return"pending";}return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9-]+/.test(value))return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)nDigit-=9;}nCheck+=nDigit;bEven=!bEven;}return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);;(function($){var ajax=$.ajax;var pendingRequests={};$.ajax=function(settings){settings=$.extend(settings,$.extend({},$.ajaxSettings,settings));var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}return(pendingRequests[port]=ajax.apply(this,arguments));}return ajax.apply(this,arguments);};})(jQuery);;(function($){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){if($.browser.msie)return false;this.addEventListener(original,$.event.special[fix].handler,true);},teardown:function(){if($.browser.msie)return false;this.removeEventListener(original,$.event.special[fix].handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};});$.extend($.fn,{delegate:function(type,delegate,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});},triggerEvent:function(type,target){return this.triggerHandler(type,[$.event.fix({type:type,target:target})]);}})})(jQuery);(function($){var a={},c="doTimeout",d=Array.prototype.slice;$[c]=function(){return b.apply(window,[0].concat(d.call(arguments)))};$.fn[c]=function(){var f=d.call(arguments),e=b.apply(this,[c+f[0]].concat(f));return typeof f[0]==="number"||typeof f[1]==="number"?this:e};function b(k){var l=this,g,i={},m=arguments,h=4,f=m[1],j=m[2],o=m[3];if(typeof f!=="string"){h--;f=k=0;j=m[1];o=m[2]}if(k){g=l.eq(0);g.data(k,i=g.data(k)||{})}else{if(f){i=a[f]||(a[f]={})}}i.id&&clearTimeout(i.id);delete i.id;function e(){if(k){g.removeData(k)}else{if(f){delete a[f]}}}function n(){i.id=setTimeout(function(){i.fn()},j)}if(o){i.fn=function(p){o.apply(l,d.call(m,h))&&!p?n():e()};n()}else{if(i.fn){j===undefined?e():i.fn(j===false);return true}else{e()}}}})(jQuery);(function(c){var a=["DOMMouseScroll","mousewheel"];c.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var d=a.length;d;){this.addEventListener(a[--d],b,false)}}else{this.onmousewheel=b}},teardown:function(){if(this.removeEventListener){for(var d=a.length;d;){this.removeEventListener(a[--d],b,false)}}else{this.onmousewheel=null}}};c.fn.extend({mousewheel:function(d){return d?this.bind("mousewheel",d):this.trigger("mousewheel")},unmousewheel:function(d){return this.unbind("mousewheel",d)}});function b(f){var d=[].slice.call(arguments,1),g=0,e=true;f=c.event.fix(f||window.event);f.type="mousewheel";if(f.wheelDelta){g=f.wheelDelta/120}if(f.detail){g=-f.detail/3}d.unshift(f,g);return c.event.handle.apply(this,d)}})(jQuery);(function($){$.fn.goldoverlay=function(options){var defaults={top:'center',target:null,closeOnClick:true,closeOnEsc:false,onBeforeLoad:null,onLoad:null,onClose:null};var $this=$(this);var options=$.extend(defaults,options);if(typeof $.fn.overlay!='function')return;var overlayDiv=$this.overlay({api:true,top:options.top,target:options.target,closeOnClick:options.closeOnClick,closeOnEsc:options.closeOnEsc,onBeforeLoad:function(){$("#overlay_screen").before(this.getOverlay());showOverlayScreen();if(options.onBeforeLoad!=null)
options.onBeforeLoad();},onLoad:function(){if(options.onLoad!=null)
options.onLoad();},onClose:function(){hideOverlayScreen();if(options.onClose!=null)
options.onClose();}});return this;};function showOverlayScreen(){if($.browser.msie&&$.browser.version.substr(0,1)<7){$("#overlay_screen").css("height",GUCCI.viewport.height());select=$("select:visible");select.hide();}
$("#overlay_screen").css('filter','alpha(opacity=70)');$("#overlay_screen").fadeIn();};function hideOverlayScreen(){if($.browser.msie&&$.browser.version.substr(0,1)<7){select.show();}
$("#overlay_screen").fadeOut();};})(jQuery);(function($)
{$.fn.goldscrollbar=function(options)
{var defaults={container:null,handle:null,offset:0,scrollwidth:0,effect:'drag',resize:false,columnwidth:0,paneltriptych:822,panelwidthdata:null,panelcountdata:null,fadepanelleft:null,fadepanelright:null,duration:600,lazydelay:1500,lazyisok:true,lazyreset:true};var options=$.extend(defaults,options);if(!options.container)return false;if(options.resize&&!options.handle)return;if(!options.scrollwidth)return;if(!options.columnwidth)return;if(typeof options.panelwidthdata!='object')return;if(typeof options.panelcountdata!='object')return;if(!options.handle)
{var end=$(document.createElement('div')).addClass('end');options.handle=$(document.createElement('div')).addClass('handle');options.handle.append(end);this.append(options.handle);}
var handlepercentage=(options.paneltriptych/options.scrollwidth);if(handlepercentage>=1)
{handlepercentage=1;$('#pagination').hide();}
else
{if($.browser.msie&&$.browser.version.substr(0,1)==7)
{$('#category_tools').fadeIn('fast');}
else
{$('#category_tools').show();}
$('#pagination').show();}
options.handle.css({'width':handlepercentage*this.width()+'px'});var scrollbarspace=this.width()-options.handle.width();options.container.find('div.ggpanel:first').css('marginLeft',options.offset+'px');var panel_wrapper=$('#panel_wrapper');if(GUCCI.isIE)
{$('#loading').remove();panel_wrapper.css({visibility:'visible'});}
$.fn.goldscrollbar.vars.scrollbarspace=scrollbarspace;$.fn.goldscrollbar.vars.scrollwidth=options.scrollwidth;$.fn.goldscrollbar.vars.offset=options.offset;$.fn.goldscrollbar.vars.container=options.container;$.fn.goldscrollbar.vars.columnwidth=options.columnwidth;$.fn.goldscrollbar.vars.panelwidthdata=options.panelwidthdata;$.fn.goldscrollbar.vars.panelcountdata=options.panelcountdata;$.fn.goldscrollbar.vars.panelnoimages=new Array();$.fn.goldscrollbar.vars.panelswithimagecount=0;$.fn.goldscrollbar.vars.DEBUG=0;$.fn.goldscrollbar.vars.effect=options.effect;$.fn.goldscrollbar.vars.fadepanelleft=options.fadepanelleft;$.fn.goldscrollbar.vars.fadepanelright=options.fadepanelright;$.fn.goldscrollbar.vars.pageback=false;$.fn.goldscrollbar.vars.pageforward=false;$.fn.goldscrollbar.vars.scrolling=false;$.fn.goldscrollbar.vars.centerpanel=0;$.fn.goldscrollbar.vars.centercolumn=0;$.fn.goldscrollbar.vars.duration=options.duration;$.fn.goldscrollbar.vars.scrollstop=822;$.fn.goldscrollbar.vars.single_key=$('.panel_single_key').html();$.fn.goldscrollbar.vars.multi_key=$('.panel_multi_key').html();$.fn.goldscrollbar.vars.panelpositionupdate=false;$.fn.goldscrollbar.vars.panelcount=0;$.fn.goldscrollbar.vars.lazypoller=0;$.fn.goldscrollbar.vars.lazyisok=options.lazyisok;$.fn.goldscrollbar.vars.lazyreset=options.lazyreset;if($.fn.goldscrollbar.vars.lazyreset)
{clearInterval($.fn.goldscrollbar.vars.lazypoller);$.fn.goldscrollbar.vars.panelswithimagecount=0;$.fn.goldscrollbar.vars.lazypoller=setInterval(cattleprod,options.lazydelay);}
if(!options.resize)$.fn.goldscrollbar.vars.container.scrollLeft(0);if(options.resize)setActiveColumn(0);else setActiveColumn(2);if(options.fadepanelleft)$.fn.goldscrollbar.vars.fadepanelleftfaded=(options.fadepanelleft.css('display')=='none');if(options.fadepanelleft)$.fn.goldscrollbar.vars.fadepanelrightfaded=(options.fadepanelright.css('display')=='none');if(options.effect=='stop')
{if(!options.resize)options.handle.draggable({containment:'parent',cursor:'pointer',stop:handleStop}).mouseover(function(){$(this).css('cursor','pointer');});}
else
{if(!options.resize)
{options.handle.draggable({containment:'parent',cursor:'pointer',drag:handleDrag}).mouseover(function(){$(this).css('cursor','pointer');});if(options.columnwidth)
{options.handle.bind('dragstop',function()
{animateSnapBack(options.handle);$.fn.goldscrollbar.vars.panelpositionupdate=true;});options.handle.bind('click',function()
{animateSnapBack(options.handle);});options.handle.bind('mousedown',function()
{$.fn.goldscrollbar.vars.panelpositionupdate=false;setActiveColumn(0);hideArrows();});checkArrows();}}}
if(options.resize)animateSnapBack(options.handle);return options.handle;};$.fn.goldscrollbar.vars={container:null,scrollbarspace:0,scrollwidth:0,offset:0,effect:'drag',columnwidth:0};$.fn.goldscrollcontainer=function(movement,duration)
{if($.fn.goldscrollbar.vars.scrolling)return;$this=$(this);var container=$.fn.goldscrollbar.vars.container;var scrollwidth=$.fn.goldscrollbar.vars.scrollwidth;var scrollbarspace=$.fn.goldscrollbar.vars.scrollbarspace;if(!container||!scrollbarspace||!scrollwidth)return;if(!duration)duration=$.fn.goldscrollbar.vars.duration;var newcontainerleft=container.scrollLeft()+movement;if(newcontainerleft<0)
{newcontainerleft=0;}
else if(newcontainerleft>(scrollwidth-$.fn.goldscrollbar.vars.scrollstop))
{newcontainerleft=(scrollwidth-$.fn.goldscrollbar.vars.scrollstop);}
var newscrollbarleft=(newcontainerleft/(scrollwidth-$.fn.goldscrollbar.vars.scrollstop))*scrollbarspace;setActiveColumn(0);var pagination=$('#pagination');var pageback=pagination.children('div.back');var pageforward=pagination.children('div.forward');$.fn.goldscrollbar.vars.pagebackbg=pageback.css('backgroundImage');$.fn.goldscrollbar.vars.pageforwardbg=pageforward.css('backgroundImage');pageback.css('backgroundImage','none');pageforward.css('backgroundImage','none');$.fn.goldscrollbar.vars.scrolling=true;container.animate({'scrollLeft':newcontainerleft},duration,function()
{animateSnapBack($this,true);});moveHandle($this,newscrollbarleft,duration);};function handleDrag(event,ui)
{$this=$(this);GUCCI.Category.initialpositionoffset=0;var percentage=ui.position.left/$.fn.goldscrollbar.vars.scrollbarspace;var newleft=(percentage*($.fn.goldscrollbar.vars.scrollwidth-$.fn.goldscrollbar.vars.scrollstop));$.fn.goldscrollbar.vars.container.scrollLeft(newleft);}
function handleStop(event,ui)
{var $this=$(this);var percentage=ui.position.left/$.fn.goldscrollbar.vars.scrollbarspace;var newleft=(percentage*($.fn.goldscrollbar.vars.scrollwidth-$.fn.goldscrollbar.vars.scrollstop));$.fn.goldscrollbar.vars.container.animate({'scrollLeft':newleft},'fast',function(){animateSnapBack($this);});}
function animateSnapBack(handle,skipanimate)
{var duration=$.fn.goldscrollbar.vars.duration;var activecolumn=Math.round(($.fn.goldscrollbar.vars.container.scrollLeft())/$.fn.goldscrollbar.vars.columnwidth);var snapleft=activecolumn*$.fn.goldscrollbar.vars.columnwidth;var newscrollbarleft=(snapleft/($.fn.goldscrollbar.vars.scrollwidth-$.fn.goldscrollbar.vars.scrollstop))*$.fn.goldscrollbar.vars.scrollbarspace;if($('.handle').position().top!=$('#scrollbar').position().top)$('.handle').css({top:'0'});if(skipanimate)
{$.fn.goldscrollbar.vars.scrolling=false;setActiveColumn(activecolumn+2);}
else
{$.fn.goldscrollbar.vars.container.animate({'scrollLeft':snapleft},duration,function()
{$.fn.goldscrollbar.vars.scrolling=false;GUCCI.Category.panel.ignore=false;setActiveColumn(activecolumn+2);});}
moveHandle(handle,newscrollbarleft,duration);}
function updatePanelCount()
{var displayed=$('.ggpanel').not('.panel_inactive').find('span.panel_index').text().split(",");var activecount=0;var leftinactivecount=0;var lbound=0;var ubound=0;var panelindex=0;var itemtotal=0;var displaykey="";var displaycount=$('#panel_count strong');for(var t=0;t<$.fn.goldscrollbar.vars.panelcountdata.length;t++)
{itemtotal+=parseInt($.fn.goldscrollbar.vars.panelcountdata[t]);}
for(var a=0;a<parseInt(displayed[0]);a++)
{leftinactivecount+=parseInt($.fn.goldscrollbar.vars.panelcountdata[a]);}
for(var i=0;i<displayed.length-1;i++)
{panelindex=parseInt(displayed[i]);activecount+=parseInt($.fn.goldscrollbar.vars.panelcountdata[panelindex]);}
lbound=leftinactivecount+1;ubound=leftinactivecount+activecount;if(lbound==ubound)
{displaykey=$.fn.goldscrollbar.vars.single_key;displaykey=displaykey.replace(/:num/,ubound);displaykey=displaykey.replace(/:total_num/,itemtotal);}
else
{displaykey=$.fn.goldscrollbar.vars.multi_key;displaykey=displaykey.replace(/:low_num/,lbound);displaykey=displaykey.replace(/:high_num/,ubound);displaykey=displaykey.replace(/:total_num/,itemtotal);}
displaycount.html(displaykey);displaycount.css('display','block');$.fn.goldscrollbar.vars.panelpositionupdate=true;}
function moveHandle(handle,newpos,duration)
{if(!duration)duration=$.fn.goldscrollbar.vars.duration;handle.draggable('disable');handle.animate({'left':newpos+'px'},duration,function()
{handle.draggable('enable');if(GUCCI.Category.zoom.activelooks.length>0)GUCCI.Category.resizeZoom();var endpos=handle.offset().left+handle.width();if(GUCCI.Category.updateLookUrl)
{var look=$('.edge_left').find('.position').attr('id');if($.fn.goldscrollbar.vars.panelpositionupdate&&GUCCI.Category.panel.rememberposition)
{if($('.ggpanel.panel_active').length>1)
{if(look!==undefined)GUCCI.Category.updateLookUrl([look,GUCCI.Category.position.prefix+"A113"]);}
else
{if(look!==undefined)GUCCI.Category.updateLookUrl([look]);}}}});}
function setActiveColumn(activecolumnnum)
{var panels=$('.ggpanel');if(activecolumnnum<0)return;if(activecolumnnum==0)
{$('.ggpanel.panel_inactive').find('li').css({"z-index":"0"});panels.children('.obscure').fadeTo('fast',0).css('display','none');panels.removeClass('panel_inactive edge_left edge_right').addClass('panel_active');}
else
{var count=activecolumnnum;var thiscolumn=0;var activestartingpanel;var activenumberpanels;for(var i=0;i<$.fn.goldscrollbar.vars.panelwidthdata.length;i++)
{count-=$.fn.goldscrollbar.vars.panelwidthdata[i];thiscolumn+=parseInt($.fn.goldscrollbar.vars.panelwidthdata[i],10);$.fn.goldscrollbar.vars.centercolumn=thiscolumn;if(count<=0)
{$.fn.goldscrollbar.vars.centerpanel=i;if($.fn.goldscrollbar.vars.panelwidthdata[i]>2)
{$.fn.goldscrollbar.vars.centercolumn=(count==-1)?i+1:i;activestartingpanel=i;activenumberpanels=1;}
if($.fn.goldscrollbar.vars.panelwidthdata[i]==2)
{if(count==0)
{activestartingpanel=i;activenumberpanels=2;$.fn.goldscrollbar.vars.centercolumn-=1;}
else
{activestartingpanel=i-1;activenumberpanels=2;$.fn.goldscrollbar.vars.centercolumn-=2;}}
if($.fn.goldscrollbar.vars.panelwidthdata[i]<2)
{activestartingpanel=i-1;activenumberpanels=3;$.fn.goldscrollbar.vars.centercolumn-=1;}
break;}}
panels=$('#panel_wrapper .ggpanel');var inactivepanels=panels.filter('.ggpanel:lt('+activestartingpanel+'),.ggpanel:gt('+(activestartingpanel+activenumberpanels-1)+')');inactivepanels.removeClass('panel_active').addClass('panel_inactive');inactivepanels.children('.obscure').first().fadeTo('fast',0.5,updatePanelCount);inactivepanels.children('.obscure').fadeTo('fast',0.5);var activepanelfirst=panels.filter('.ggpanel:eq('+activestartingpanel+')');var activepanellast=panels.filter('.ggpanel:eq('+(activestartingpanel+activenumberpanels-1)+')');activepanelfirst.addClass('edge_left');activepanellast.addClass('edge_right');}
checkArrows();}
function cattleprod()
{$.fn.goldscrollbar.vars.DEBUG++;if($.fn.goldscrollbar.vars.lazyisok)
{var maxvisiblecolumns=Math.round(GUCCI.viewport.width()/$.fn.goldscrollbar.vars.columnwidth)+1;var numvisiblepanels=0;var startindex=0;var panels=$('#panel_wrapper .ggpanel');if($.fn.goldscrollbar.vars.panelnoimages.length==0||$.fn.goldscrollbar.vars.lazyreset)
{$.fn.goldscrollbar.vars.panelnoimages=new Array();for(var l=0;l<$.fn.goldscrollbar.vars.panelcountdata.length;l++)
{$.fn.goldscrollbar.vars.panelnoimages.push(true);}
$.fn.goldscrollbar.vars.lazyreset=false;}
if(panels.length>0)
{if(GUCCI.isIE&&GUCCI.IEversion<8)
{numvisiblepanels=4;if(panels.eq(0).offset().left<0)
{startindex=parseInt($('#panel_wrapper .ggpanel.panel_active').eq(0).find('.panel_index').html());if(startindex>0)startindex--;}
else
{startindex=0;}}
else
{if(panels.eq(0).offset().left<0)
{startindex=Math.ceil(Math.abs(panels.eq(0).offset().left/$.fn.goldscrollbar.vars.columnwidth))-1;numvisiblepanels=maxvisiblecolumns;startindex=indextweak(startindex);}
else
{numvisiblepanels=maxvisiblecolumns-Math.ceil(Math.abs(panels.eq(0).offset().left/$.fn.goldscrollbar.vars.columnwidth));startindex=0;}}
for(var p=startindex;p<=startindex+numvisiblepanels;p++)
{if(p<=panels.length-1)
{if($.fn.goldscrollbar.vars.panelnoimages[p])
{panels.eq(p).find(GUCCI.Category.lazyloaders).trigger('appear');$.fn.goldscrollbar.vars.panelnoimages[p]=false;if($.fn.goldscrollbar.vars.panelwidthdata[p]==2)
$.fn.goldscrollbar.vars.panelswithimagecount+=2;else if($.fn.goldscrollbar.vars.panelwidthdata[p]==3)
$.fn.goldscrollbar.vars.panelswithimagecount+=3;else
$.fn.goldscrollbar.vars.panelswithimagecount++;}}}}}}
function indextweak(start)
{for(var m=0;m<start;m++)
{if($.fn.goldscrollbar.vars.panelwidthdata[m]==2&&start>0)
start--;else if($.fn.goldscrollbar.vars.panelwidthdata[m]==3&&start>0)
start-=2;}
return start;}
function hideArrows()
{if($.browser.msie&&$.browser.version.substr(0,1)>=7)
{$('#pagination .back,#pagination .forward').hide();}
else
{$('#pagination .back,#pagination .forward').fadeOut('fast');}
$.fn.goldscrollbar.vars.pageback=false;$.fn.goldscrollbar.vars.pageforward=false;}
function checkArrows()
{var panels=$.fn.goldscrollbar.vars.panelwidthdata;var number_of_columns=0;for(var p=0;p<panels.length;p++)
{number_of_columns+=parseInt(panels[p],10);}
var pagination=$('#pagination');var pageback=pagination.children('.back');var pageforward=pagination.children('.forward');if(!$.fn.goldscrollbar.vars.pageforward&&$.fn.goldscrollbar.vars.centercolumn<number_of_columns-2)
{if($.browser.msie&&$.browser.version.substr(0,1)>=7)pageforward.show();else pageforward.fadeIn('fast');$.fn.goldscrollbar.vars.pageforward=true;}
var comparecolumn=$.fn.goldscrollbar.vars.centercolumn;if($.fn.goldscrollbar.vars.pageforward&&comparecolumn>=number_of_columns-2)
{$.fn.goldscrollbar.vars.pageforward=false;if($.browser.msie&&$.browser.version.substr(0,1)>=7)pageforward.hide();else pageforward.fadeOut('fast');}
var pagebacktest=1;if(!$.fn.goldscrollbar.vars.pageback&&$.fn.goldscrollbar.vars.centercolumn>pagebacktest)
{if($.browser.msie&&$.browser.version.substr(0,1)>=7)pageback.show();else pageback.fadeIn('fast');$.fn.goldscrollbar.vars.pageback=true;}
if($.fn.goldscrollbar.vars.pageback&&$.fn.goldscrollbar.vars.centercolumn<=pagebacktest)
{$.fn.goldscrollbar.vars.pageback=false;if($.browser.msie&&$.browser.version.substr(0,1)>=7)
{pageback.hide();}
else
{pageback.fadeOut('fast');}}
if($.fn.goldscrollbar.vars.pageback&&pageback.css('backgroundImage')=='none')pageback.css('backgroundImage',$.fn.goldscrollbar.vars.pagebackbg);if($.fn.goldscrollbar.vars.pageforward&&pageforward.css('backgroundImage')=='none')pageforward.css('backgroundImage',$.fn.goldscrollbar.vars.pageforwardbg);}})(jQuery);(function($){$.Broadcaster={namespace:"com.twelvestone"};$.fn.register=function(evt,f){evt=$.Broadcaster.namespace+"."+evt;$._subscribers=$._subscribers||{};$._subscribers[evt]=typeof $._subscribers[evt]==="undefined"?[]:$._subscribers[evt];$(this).bind(evt,f);$._subscribers[evt].push($(this));return $(this);};$.broadcast=function(evt,data){evt=$.Broadcaster.namespace+"."+evt;$.each(($._subscribers[evt]||[]),function(){this.trigger(evt,data);});};})(jQuery);jQuery.fn.supersleight=function(settings){settings=jQuery.extend({imgs:true,backgrounds:true,shim:'x.gif',apply_positioning:true},settings);return this.each(function(){if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<7&&parseInt(jQuery.browser.version,10)>4){jQuery(this).find('*').andSelf().each(function(i,obj){var self=jQuery(obj);if(settings.backgrounds&&self.css('background-image').match(/\.png/i)!==null){var bg=self.css('background-image');var src=bg.substring(5,bg.length-2);var mode=(self.css('background-repeat')=='no-repeat'?'crop':'scale');var styles={'filter':"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='"+mode+"')",'background-image':'url('+settings.shim+')'};self.css(styles);};if(settings.imgs&&self.is('img[src$=png]')){var styles={'width':self.width()+'px','height':self.height()+'px','filter':"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+self.attr('src')+"', sizingMethod='scale')"};self.css(styles).attr('src',settings.shim);};if(settings.apply_positioning&&self.is('a, input')&&(self.css('position')===''||self.css('position')=='static')){self.css('position','relative');};});};});};(function($){$.fn.love=function(opts){opts=$.extend({url:"/love",event:"click",caller:null,position:0,show:0,style:null},opts||{});var self=$(this);var lovable_info=self.attr("id").match(/(.+?)_([0-9]+)$/);var klass=$.map(lovable_info[1].split("_"),function(component){return component.charAt(0).toUpperCase()+component.substr(1);}).join("");self.bind(opts.event,function(event){if(GUCCI.noLoveBack)
{GUCCI.back--;GUCCI.noLoveBack=false;}
event.stopPropagation();$.ajax({url:opts.url,type:"post",data:{lovable_type:klass,lovable_id:lovable_info[2]},complete:function(request,_status){if(422==request.status){return;}else if(403==request.status){return;}else if(201==request.status){self.html(request.responseText);if(opts.caller){var lovebutton="";if(opts.caller.find('#loveit').length>0)
lovebutton=opts.caller.find('#loveit');else
lovebutton=opts.caller.find('.icon.loveit');lovebutton.find('.mylove').text(lovebutton.find('.ilovedit').text());if(typeof $.fn.tipTip=='function'&&!GUCCI.isMobile)
{lovebutton.unbind();lovebutton.tipTip({maxWidth:'150px',content:lovebutton.find('.mylove').text(),defaultPosition:'top'});}}}else{if(console){console.log(request.responseText);}}}});});return self;};})(jQuery);(function($)
{$.fn.goldswipe=function(options)
{var defaults={thresholdX:50,thresholdY:50,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null};var options=$.extend(defaults,options);$.fn.goldswipe.vars.threshold={x:options.thresholdX,y:options.thresholdY};$.fn.goldswipe.vars.change={x:0,y:0};$.fn.goldswipe.vars.swipeLeft=options.swipeLeft;$.fn.goldswipe.vars.swipeRight=options.swipeRight;$.fn.goldswipe.vars.swipeUp=options.swipeUp;$.fn.goldswipe.vars.swipeDown=options.swipeDown;var originalCoord={x:0,y:0};var finalCoord={x:0,y:0};this[0].addEventListener('touchstart',function(event)
{originalCoord.x=event.targetTouches[0].pageX;originalCoord.y=event.targetTouches[0].pageY;finalCoord.x=originalCoord.x;finalcoord.y=originalCoord.y;},false);this[0].addEventListener('touchmove',function(event)
{event.preventDefault();finalCoord.x=event.targetTouches[0].pageX;finalCoord.y=event.targetTouches[0].pageY;},false);this[0].addEventListener('touchend',function(event)
{$.fn.goldswipe.vars.change.x=originalCoord.x-finalCoord.x;$.fn.goldswipe.vars.change.y=originalCoord.y-finalCoord.y;if($.fn.goldswipe.vars.change.x>$.fn.goldswipe.vars.threshold.x)
{$.fn.goldswipe.vars.swipeLeft();}
if($.fn.goldswipe.vars.change.x<(-1*$.fn.goldswipe.vars.threshold.x))
{$.fn.goldswipe.vars.swipeRight();}
if($.fn.goldswipe.vars.change.y>$.fn.goldswipe.vars.threshold.y)
{$.fn.goldswipe.vars.swipeUp();}
if($.fn.goldswipe.vars.change.y<(-1*$.fn.goldswipe.vars.threshold.y))
{$.fn.goldswipe.vars.swipeDown();}
$.fn.goldswipe.vars.change.x=0;$.fn.goldswipe.vars.change.y=0;},false);};$.fn.goldswipe.vars={threshold:{x:50,y:50},change:{x:0,y:0},swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null};})(jQuery);(function($){$.fn.tipTip=function(options){var defaults={activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){}};var opts=$.extend(defaults,options);if($("#tiptip_holder").length<=0){var tiptip_holder=$('<div id="tiptip_holder" style="max-width:'+opts.maxWidth+';"></div>');var tiptip_content=$('<div id="tiptip_content"></div>');var tiptip_arrow=$('<div id="tiptip_arrow"></div>');$("body").append(tiptip_holder.html(tiptip_content).prepend(tiptip_arrow.html('<div id="tiptip_arrow_inner"></div>')))}else{var tiptip_holder=$("#tiptip_holder");var tiptip_content=$("#tiptip_content");var tiptip_arrow=$("#tiptip_arrow")}return this.each(function(){var org_elem=$(this);if(opts.content){var org_title=opts.content}else{var org_title=org_elem.attr(opts.attribute)}if(org_title!=""){if(!opts.content){org_elem.removeAttr(opts.attribute)}var timeout=false;if(opts.activation=="hover"){org_elem.hover(function(){active_tiptip()},function(){if(!opts.keepAlive){deactive_tiptip()}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip()})}}else if(opts.activation=="focus"){org_elem.focus(function(){active_tiptip()}).blur(function(){deactive_tiptip()})}else if(opts.activation=="click"){org_elem.click(function(){active_tiptip();return false}).hover(function(){},function(){if(!opts.keepAlive){deactive_tiptip()}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip()})}}function active_tiptip(){opts.enter.call(this);tiptip_content.html(org_title);tiptip_holder.hide().removeAttr("class").css("margin","0");tiptip_arrow.removeAttr("style");var top=parseInt(org_elem.offset()['top']);var left=parseInt(org_elem.offset()['left']);var org_width=parseInt(org_elem.outerWidth());var org_height=parseInt(org_elem.outerHeight());var tip_w=tiptip_holder.outerWidth();var tip_h=tiptip_holder.outerHeight();var w_compare=Math.round((org_width-tip_w)/2);var h_compare=Math.round((org_height-tip_h)/2);var marg_left=Math.round(left+w_compare);var marg_top=Math.round(top+org_height+opts.edgeOffset);var t_class="";var arrow_top="";var arrow_left=Math.round(tip_w-12)/2;if(opts.defaultPosition=="bottom"){t_class="_bottom"}else if(opts.defaultPosition=="top"){t_class="_top"}else if(opts.defaultPosition=="left"){t_class="_left"}else if(opts.defaultPosition=="right"){t_class="_right"}var right_compare=(w_compare+left)<parseInt($(window).scrollLeft());var left_compare=(tip_w+left)>parseInt($(window).width());if((right_compare&&w_compare<0)||(t_class=="_right"&&!left_compare)||(t_class=="_left"&&left<(tip_w+opts.edgeOffset+5))){t_class="_right";arrow_top=Math.round(tip_h-13)/2;arrow_left=-12;marg_left=Math.round(left+org_width+opts.edgeOffset);marg_top=Math.round(top+h_compare)}else if((left_compare&&w_compare<0)||(t_class=="_left"&&!right_compare)){t_class="_left";arrow_top=Math.round(tip_h-13)/2;arrow_left=Math.round(tip_w);marg_left=Math.round(left-(tip_w+opts.edgeOffset+5));marg_top=Math.round(top+h_compare)}var top_compare=(top+org_height+opts.edgeOffset+tip_h+8)>parseInt($(window).height()+$(window).scrollTop());var bottom_compare=((top+org_height)-(opts.edgeOffset+tip_h+8))<0;if(top_compare||(t_class=="_bottom"&&top_compare)||(t_class=="_top"&&!bottom_compare)){if(t_class=="_top"||t_class=="_bottom"){t_class="_top"}else{t_class=t_class+"_top"}arrow_top=tip_h;marg_top=Math.round(top-(tip_h+5+opts.edgeOffset))}else if(bottom_compare|(t_class=="_top"&&bottom_compare)||(t_class=="_bottom"&&!top_compare)){if(t_class=="_top"||t_class=="_bottom"){t_class="_bottom"}else{t_class=t_class+"_bottom"}arrow_top=-12;marg_top=Math.round(top+org_height+opts.edgeOffset)}if(t_class=="_right_top"||t_class=="_left_top"){marg_top=marg_top+5}else if(t_class=="_right_bottom"||t_class=="_left_bottom"){marg_top=marg_top-5}if(t_class=="_left_top"||t_class=="_left_bottom"){marg_left=marg_left+5}tiptip_arrow.css({"margin-left":arrow_left+"px","margin-top":arrow_top+"px"});tiptip_holder.css({"margin-left":marg_left+"px","margin-top":marg_top+"px"}).attr("class","tip"+t_class);if(timeout){clearTimeout(timeout)}timeout=setTimeout(function(){tiptip_holder.stop(true,true).fadeIn(opts.fadeIn)},opts.delay)}function deactive_tiptip(){opts.exit.call(this);if(timeout){clearTimeout(timeout)}tiptip_holder.fadeOut(opts.fadeOut)}}})}})(jQuery);(function($){$.Broadcaster={namespace:"com.twelvestone"};$.fn.register=function(evt,f){evt=$.Broadcaster.namespace+"."+evt;$._subscribers=$._subscribers||{};$._subscribers[evt]=typeof $._subscribers[evt]==="undefined"?[]:$._subscribers[evt];$(this).bind(evt,f);$._subscribers[evt].push($(this));return $(this);};$.broadcast=function(evt,data){evt=$.Broadcaster.namespace+"."+evt;$.each(($._subscribers[evt]||[]),function(){this.trigger(evt,data);});};})(jQuery);jQuery.fn.textlimit=function(counter_el,thelimit,speed){var charDelSpeed=speed||15;var toggleCharDel=speed!=-1;var toggleTrim=true;var that=this[0];updateCounter();function updateCounter(){jQuery(counter_el).text(thelimit-that.value.length);};this.keypress(function(e){if(this.value.length>=thelimit&&e.charCode!='0')e.preventDefault()}).keyup(function(e){updateCounter();if(this.value.length>=thelimit&&toggleTrim){if(toggleCharDel){that.value=that.value.substr(0,thelimit+100);var init=setInterval
(function(){if(that.value.length<=thelimit){init=clearInterval(init);updateCounter()}
else{that.value=that.value.substring(0,that.value.length-1);jQuery(counter_el).text('trimming...  '+(thelimit-that.value.length));};},charDelSpeed);}
else this.value=that.value.substr(0,thelimit);}});};(function($){$.jScrollPane={active:[]};$.fn.jScrollPane=function(settings)
{settings=$.extend({},$.fn.jScrollPane.defaults,settings);var rf=function(){return false;};return this.each(function()
{var $this=$(this);var paneEle=this;var currentScrollPosition=0;var paneWidth;var paneHeight;var trackHeight;var trackOffset=settings.topCapHeight;var $container;if($(this).parent().is('.jScrollPaneContainer')){$container=$(this).parent();currentScrollPosition=settings.maintainPosition?$this.position().top:0;var $c=$(this).parent();paneWidth=$c.innerWidth();paneHeight=$c.outerHeight();$('>.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown, >.jScrollCap',$c).remove();$this.css({'top':0});}else{$this.data('originalStyleTag',$this.attr('style'));$this.css('overflow','hidden');this.originalPadding=$this.css('paddingTop')+' '+$this.css('paddingRight')+' '+$this.css('paddingBottom')+' '+$this.css('paddingLeft');this.originalSidePaddingTotal=(parseInt($this.css('paddingLeft'))||0)+(parseInt($this.css('paddingRight'))||0);paneWidth=$this.innerWidth();paneHeight=$this.innerHeight();$container=$('<div></div>').attr({'className':'jScrollPaneContainer'}).css({'height':paneHeight+'px','width':paneWidth+'px'});if(settings.enableKeyboardNavigation){$container.attr('tabindex',settings.tabIndex);}
$this.wrap($container);$container=$this.parent();$(document).bind('emchange',function(e,cur,prev)
{$this.jScrollPane(settings);});}
trackHeight=paneHeight;if(settings.reinitialiseOnImageLoad){var $imagesToLoad=$.data(paneEle,'jScrollPaneImagesToLoad')||$('img',$this);var loadedImages=[];if($imagesToLoad.length){$imagesToLoad.each(function(i,val){$(this).bind('load readystatechange',function(){if($.inArray(i,loadedImages)==-1){loadedImages.push(val);$imagesToLoad=$.grep($imagesToLoad,function(n,i){return n!=val;});$.data(paneEle,'jScrollPaneImagesToLoad',$imagesToLoad);var s2=$.extend(settings,{reinitialiseOnImageLoad:false});$this.jScrollPane(s2);}}).each(function(i,val){if(this.complete||this.complete===undefined){this.src=this.src;}});});};}
var p=this.originalSidePaddingTotal;var realPaneWidth=paneWidth-settings.scrollbarWidth-settings.scrollbarMargin-p;var cssToApply={'height':'auto','width':realPaneWidth+'px'}
if(settings.scrollbarOnLeft){cssToApply.paddingLeft=settings.scrollbarMargin+settings.scrollbarWidth+'px';}else{cssToApply.paddingRight=settings.scrollbarMargin+'px';}
$this.css(cssToApply);var contentHeight=$this.outerHeight();var percentInView=paneHeight/contentHeight;var isScrollable=percentInView<.99;$container[isScrollable?'addClass':'removeClass']('jScrollPaneScrollable');if(isScrollable){$container.append($('<div></div>').addClass('jScrollCap jScrollCapTop').css({height:settings.topCapHeight}),$('<div></div>').attr({'className':'jScrollPaneTrack'}).css({'width':settings.scrollbarWidth+'px'}).append($('<div></div>').attr({'className':'jScrollPaneDrag'}).css({'width':settings.scrollbarWidth+'px'}).append($('<div></div>').attr({'className':'jScrollPaneDragTop'}).css({'width':settings.scrollbarWidth+'px'}),$('<div></div>').attr({'className':'jScrollPaneDragBottom'}).css({'width':settings.scrollbarWidth+'px'}))),$('<div></div>').addClass('jScrollCap jScrollCapBottom').css({height:settings.bottomCapHeight}));var $track=$('>.jScrollPaneTrack',$container);var $drag=$('>.jScrollPaneTrack .jScrollPaneDrag',$container);var currentArrowDirection;var currentArrowTimerArr=[];var currentArrowInc;var whileArrowButtonDown=function()
{if(currentArrowInc>4||currentArrowInc%4==0){positionDrag(dragPosition+currentArrowDirection*mouseWheelMultiplier);}
currentArrowInc++;};if(settings.enableKeyboardNavigation){$container.bind('keydown.jscrollpane',function(e)
{switch(e.keyCode){case 38:currentArrowDirection=-1;currentArrowInc=0;whileArrowButtonDown();currentArrowTimerArr[currentArrowTimerArr.length]=setInterval(whileArrowButtonDown,100);return false;case 40:currentArrowDirection=1;currentArrowInc=0;whileArrowButtonDown();currentArrowTimerArr[currentArrowTimerArr.length]=setInterval(whileArrowButtonDown,100);return false;case 33:case 34:return false;default:}}).bind('keyup.jscrollpane',function(e)
{if(e.keyCode==38||e.keyCode==40){for(var i=0;i<currentArrowTimerArr.length;i++){clearInterval(currentArrowTimerArr[i]);}
return false;}});}
if(settings.showArrows){var currentArrowButton;var currentArrowInterval;var onArrowMouseUp=function(event)
{$('html').unbind('mouseup',onArrowMouseUp);currentArrowButton.removeClass('jScrollActiveArrowButton');clearInterval(currentArrowInterval);};var onArrowMouseDown=function(){$('html').bind('mouseup',onArrowMouseUp);currentArrowButton.addClass('jScrollActiveArrowButton');currentArrowInc=0;whileArrowButtonDown();currentArrowInterval=setInterval(whileArrowButtonDown,100);};$container.append($('<a></a>').attr({'href':'javascript:;','className':'jScrollArrowUp','tabindex':-1}).css({'width':settings.scrollbarWidth+'px','top':settings.topCapHeight+'px'}).html('Scroll up').bind('mousedown',function()
{currentArrowButton=$(this);currentArrowDirection=-1;onArrowMouseDown();this.blur();return false;}).bind('click',rf),$('<a></a>').attr({'href':'javascript:;','className':'jScrollArrowDown','tabindex':-1}).css({'width':settings.scrollbarWidth+'px','bottom':settings.bottomCapHeight+'px'}).html('Scroll down').bind('mousedown',function()
{currentArrowButton=$(this);currentArrowDirection=1;onArrowMouseDown();this.blur();return false;}).bind('click',rf));var $upArrow=$('>.jScrollArrowUp',$container);var $downArrow=$('>.jScrollArrowDown',$container);}
if(settings.arrowSize){trackHeight=paneHeight-settings.arrowSize-settings.arrowSize;trackOffset+=settings.arrowSize;}else if($upArrow){var topArrowHeight=$upArrow.height();settings.arrowSize=topArrowHeight;trackHeight=paneHeight-topArrowHeight-$downArrow.height();trackOffset+=topArrowHeight;}
trackHeight-=settings.topCapHeight+settings.bottomCapHeight;$track.css({'height':trackHeight+'px',top:trackOffset+'px'})
var $pane=$(this).css({'position':'absolute','overflow':'visible'});var currentOffset;var maxY;var mouseWheelMultiplier;var dragPosition=0;var dragMiddle=percentInView*paneHeight/2;var getPos=function(event,c){var p=c=='X'?'Left':'Top';return event['page'+c]||(event['client'+c]+(document.documentElement['scroll'+p]||document.body['scroll'+p]))||0;};var ignoreNativeDrag=function(){return false;};var initDrag=function()
{ceaseAnimation();currentOffset=$drag.offset(false);currentOffset.top-=dragPosition;maxY=trackHeight-$drag[0].offsetHeight;mouseWheelMultiplier=2*settings.wheelSpeed*maxY/contentHeight;};var onStartDrag=function(event)
{initDrag();dragMiddle=getPos(event,'Y')-dragPosition-currentOffset.top;$('html').bind('mouseup',onStopDrag).bind('mousemove',updateScroll);if($.browser.msie){$('html').bind('dragstart',ignoreNativeDrag).bind('selectstart',ignoreNativeDrag);}
return false;};var onStopDrag=function()
{$('html').unbind('mouseup',onStopDrag).unbind('mousemove',updateScroll);dragMiddle=percentInView*paneHeight/2;if($.browser.msie){$('html').unbind('dragstart',ignoreNativeDrag).unbind('selectstart',ignoreNativeDrag);}};var positionDrag=function(destY)
{$container.scrollTop(0);destY=destY<0?0:(destY>maxY?maxY:destY);dragPosition=destY;$drag.css({'top':destY+'px'});var p=destY/maxY;$this.data('jScrollPanePosition',(paneHeight-contentHeight)*-p);$pane.css({'top':((paneHeight-contentHeight)*p)+'px'});$this.trigger('scroll');if(settings.showArrows){$upArrow[destY==0?'addClass':'removeClass']('disabled');$downArrow[destY==maxY?'addClass':'removeClass']('disabled');}};var updateScroll=function(e)
{positionDrag(getPos(e,'Y')-currentOffset.top-dragMiddle);};var dragH=Math.max(Math.min(percentInView*(paneHeight-settings.arrowSize*2),settings.dragMaxHeight),settings.dragMinHeight);$drag.css({'height':dragH+'px'}).bind('mousedown',onStartDrag);var trackScrollInterval;var trackScrollInc;var trackScrollMousePos;var doTrackScroll=function()
{if(trackScrollInc>8||trackScrollInc%4==0){positionDrag((dragPosition-((dragPosition-trackScrollMousePos)/2)));}
trackScrollInc++;};var onStopTrackClick=function()
{clearInterval(trackScrollInterval);$('html').unbind('mouseup',onStopTrackClick).unbind('mousemove',onTrackMouseMove);};var onTrackMouseMove=function(event)
{trackScrollMousePos=getPos(event,'Y')-currentOffset.top-dragMiddle;};var onTrackClick=function(event)
{initDrag();onTrackMouseMove(event);trackScrollInc=0;$('html').bind('mouseup',onStopTrackClick).bind('mousemove',onTrackMouseMove);trackScrollInterval=setInterval(doTrackScroll,100);doTrackScroll();return false;};$track.bind('mousedown',onTrackClick);$container.bind('mousewheel',function(event,delta){delta=delta||(event.wheelDelta?event.wheelDelta/120:(event.detail)?-event.detail/3:0);initDrag();ceaseAnimation();var d=dragPosition;positionDrag(dragPosition-delta*mouseWheelMultiplier);var dragOccured=d!=dragPosition;return!dragOccured;});var _animateToPosition;var _animateToInterval;function animateToPosition()
{var diff=(_animateToPosition-dragPosition)/settings.animateStep;if(diff>1||diff<-1){positionDrag(dragPosition+diff);}else{positionDrag(_animateToPosition);ceaseAnimation();}}
var ceaseAnimation=function()
{if(_animateToInterval){clearInterval(_animateToInterval);delete _animateToPosition;}};var scrollTo=function(pos,preventAni)
{if(typeof pos=="string"){try{$e=$(pos,$this);}catch(err){return;}
if(!$e.length)return;pos=$e.offset().top-$this.offset().top;}
ceaseAnimation();var maxScroll=contentHeight-paneHeight;pos=pos>maxScroll?maxScroll:pos;$this.data('jScrollPaneMaxScroll',maxScroll);var destDragPosition=pos/maxScroll*maxY;if(preventAni||!settings.animateTo){positionDrag(destDragPosition);}else{$container.scrollTop(0);_animateToPosition=destDragPosition;_animateToInterval=setInterval(animateToPosition,settings.animateInterval);}};$this[0].scrollTo=scrollTo;$this[0].scrollBy=function(delta)
{var currentPos=-parseInt($pane.css('top'))||0;scrollTo(currentPos+delta);};initDrag();scrollTo(-currentScrollPosition,true);$('*',this).bind('focus',function(event)
{var $e=$(this);var eleTop=0;while($e[0]!=$this[0]){eleTop+=$e.position().top;$e=$e.offsetParent();}
var viewportTop=-parseInt($pane.css('top'))||0;var maxVisibleEleTop=viewportTop+paneHeight;var eleInView=eleTop>viewportTop&&eleTop<maxVisibleEleTop;if(!eleInView){var destPos=eleTop-settings.scrollbarMargin;if(eleTop>viewportTop){destPos+=$(this).height()+15+settings.scrollbarMargin-paneHeight;}
scrollTo(destPos);}})
if(settings.observeHash){if(location.hash&&location.hash.length>1){setTimeout(function(){scrollTo(location.hash);},$.browser.safari?100:0);}
$(document).bind('click',function(e){$target=$(e.target);if($target.is('a')){var h=$target.attr('href');if(h&&h.substr(0,1)=='#'&&h.length>1){setTimeout(function(){scrollTo(h,!settings.animateToInternalLinks);},$.browser.safari?100:0);}}});}
function onSelectScrollMouseDown(e)
{$(document).bind('mousemove.jScrollPaneDragging',onTextSelectionScrollMouseMove);$(document).bind('mouseup.jScrollPaneDragging',onSelectScrollMouseUp);}
var textDragDistanceAway;var textSelectionInterval;function onTextSelectionInterval()
{direction=textDragDistanceAway<0?-1:1;$this[0].scrollBy(textDragDistanceAway/2);}
function clearTextSelectionInterval()
{if(textSelectionInterval){clearInterval(textSelectionInterval);textSelectionInterval=undefined;}}
function onTextSelectionScrollMouseMove(e)
{var offset=$this.parent().offset().top;var maxOffset=offset+paneHeight;var mouseOffset=getPos(e,'Y');textDragDistanceAway=mouseOffset<offset?mouseOffset-offset:(mouseOffset>maxOffset?mouseOffset-maxOffset:0);if(textDragDistanceAway==0){clearTextSelectionInterval();}else{if(!textSelectionInterval){textSelectionInterval=setInterval(onTextSelectionInterval,100);}}}
function onSelectScrollMouseUp(e)
{$(document).unbind('mousemove.jScrollPaneDragging').unbind('mouseup.jScrollPaneDragging');clearTextSelectionInterval();}
$container.bind('mousedown.jScrollPane',onSelectScrollMouseDown);$.jScrollPane.active.push($this[0]);}else{$this.css({'height':paneHeight+'px','width':paneWidth-this.originalSidePaddingTotal+'px','padding':this.originalPadding});$this[0].scrollTo=$this[0].scrollBy=function(){};$this.parent().unbind('mousewheel').unbind('mousedown.jScrollPane').unbind('keydown.jscrollpane').unbind('keyup.jscrollpane');}})};$.fn.jScrollPaneRemove=function()
{$(this).each(function()
{$this=$(this);var $c=$this.parent();if($c.is('.jScrollPaneContainer')){$this.css({'top':'','height':'','width':'','padding':'','overflow':'','position':''});$this.attr('style',$this.data('originalStyleTag'));$c.after($this).remove();}});}
$.fn.jScrollPane.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:false,arrowSize:0,animateTo:false,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:true,scrollbarOnLeft:false,reinitialiseOnImageLoad:false,tabIndex:0,enableKeyboardNavigation:true,animateToInternalLinks:false,topCapHeight:0,bottomCapHeight:0,observeHash:true};$(window).bind('unload',function(){var els=$.jScrollPane.active;for(var i=0;i<els.length;i++){els[i].scrollTo=els[i].scrollBy=null;}});})(jQuery);if(!document.myGetElementsByClassName){document.myGetElementsByClassName=function(className){var children=document.getElementsByTagName('*')||document.all;var elements=new Array();for(var i=0;i<children.length;i++){var child=children[i];var classNames=child.className.split(' ');for(var j=0;j<classNames.length;j++){if(classNames[j]==className){elements.push(child);break;}}}
return elements;}}
var Reflection={defaultHeight:0.5,defaultOpacity:0.5,add:function(image,options){Reflection.remove(image);doptions={"height":Reflection.defaultHeight,"opacity":Reflection.defaultOpacity}
if(options){for(var i in doptions){if(!options[i]){options[i]=doptions[i];}}}else{options=doptions;}
try{var d=document.createElement('div');var p=image;var classes=p.className.split(' ');var newClasses='';for(j=0;j<classes.length;j++){if(classes[j]!="reflect"){if(newClasses){newClasses+=' '}
newClasses+=classes[j];}}
var reflectionHeight=Math.floor(p.height*options['height']);var divHeight=Math.floor(p.height*(1+options['height']));var reflectionWidth=p.width;if(document.all&&!window.opera){if(p.parentElement.tagName=='A'){var d=document.createElement('a');d.href=p.parentElement.href;}
d.className=newClasses;p.className='reflected';d.style.cssText=p.style.cssText;p.style.cssText='vertical-align: bottom';var reflection=document.createElement('img');reflection.src=p.src;reflection.style.width=reflectionWidth+'px';reflection.style.display='block';reflection.style.height=p.height+"px";reflection.style.marginBottom="-"+(p.height-reflectionHeight)+'px';reflection.style.filter='flipv progid:DXImageTransform.Microsoft.Alpha(opacity='+(options['opacity']*100)+', style=1, finishOpacity=0, startx=0, starty=0, finishx=0, finishy='+(options['height']*100)+')';d.style.width=reflectionWidth+'px';d.style.height=divHeight+'px';p.parentNode.replaceChild(d,p);d.appendChild(p);d.appendChild(reflection);}else{var canvas=document.createElement('canvas');if(canvas.getContext){d.className=newClasses;p.className='reflected';d.style.cssText=p.style.cssText;p.style.cssText='vertical-align: bottom';var context=canvas.getContext("2d");canvas.style.height=reflectionHeight+'px';canvas.style.width=reflectionWidth+'px';canvas.height=reflectionHeight;canvas.width=reflectionWidth;d.style.width=reflectionWidth+'px';d.style.height=divHeight+'px';p.parentNode.replaceChild(d,p);d.appendChild(p);d.appendChild(canvas);context.save();context.translate(0,image.height-1);context.scale(1,-1);context.drawImage(image,0,0,reflectionWidth,image.height);context.restore();context.globalCompositeOperation="destination-out";var gradient=context.createLinearGradient(0,0,0,reflectionHeight);gradient.addColorStop(1,"rgba(255, 255, 255, 1.0)");gradient.addColorStop(0,"rgba(255, 255, 255, "+(1-options['opacity'])+")");context.fillStyle=gradient;context.rect(0,0,reflectionWidth,reflectionHeight*2);context.fill();}}}catch(e){}},remove:function(image){if(image.className=="reflected"){image.className=image.parentNode.className;image.parentNode.parentNode.replaceChild(image,image.parentNode);}}}
function addReflections(){var rimages=document.myGetElementsByClassName('reflect');for(i=0;i<rimages.length;i++){var rheight=null;var ropacity=null;var classes=rimages[i].className.split(' ');for(j=0;j<classes.length;j++){if(classes[j].indexOf("rheight")==0){var rheight=classes[j].substring(7)/100;}else if(classes[j].indexOf("ropacity")==0){var ropacity=classes[j].substring(8)/100;}}
Reflection.add(rimages[i],{height:rheight,opacity:ropacity});}}
var previousOnload=window.onload;window.onload=function(){if(previousOnload)previousOnload();addReflections();}