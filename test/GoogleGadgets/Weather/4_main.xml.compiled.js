
function o(a,b,c,d){this.language=a;this.profile=b;this.maxLocations=c;this.onOk=d}o.prototype.Y=function(a){var b=this;ra(a,this.language,function(c,d){b.H(c,d)})};o.BLANK_SPACE=" ";o.prototype.H=function(a,b){this.citiesDropList.text=[o.BLANK_SPACE].concat(a);this.currentCities=b;if(!a.length){this.l(true)}this.f()};o.prototype.I=function(a){for(var b=0;b<this.currentCities.length;++b){if(this.currentCities[b].name==a){return this.currentCities[b]}}};o.prototype.l=function(a){this.cityEditBox.enabled=
a;this.citiesDropList.enabled=!a};o.prototype.m=function(){return this.cityEditBox.enabled};o.prototype.j=function(a){this.celsiusButton.value=a;this.farenheitButton.value=!a;this.profile.b=a};o.prototype.h=function(){this.locationsOpenList.text=this.profile.J();if(this.profile.locationList.length>0){this.removeButton.enabled=true}else{this.removeButton.enabled=false;this.moveUpButton.enabled=false;this.moveDownButton.enabled=false}this.f()};o.prototype.g=function(){var a=this.locationsOpenList.value;
if(this.profile.c(a)>0){this.moveUpButton.enabled=true}else{this.moveUpButton.enabled=false}if(this.profile.c(a)<this.profile.locationList.length-1){this.moveDownButton.enabled=true}else{this.moveDownButton.enabled=false}};o.prototype.f=function(){if(this.profile.locationList.length>=this.maxLocations){this.addButton.enabled=false;var a=na(strings.MAXIMUM_ITEMS,strings.MAXIMUM_ITEMS_PH,this.maxLocations);this.maxReachedLabel.value=a;return}this.maxReachedLabel.value="";if(this.m()&&!this.cityEditBox.value){this.addButton.enabled=
false;return}if(!this.m()&&(!this.citiesDropList.value||this.citiesDropList.value==o.BLANK_SPACE)){this.addButton.enabled=false;return}this.addButton.enabled=true};o.prototype.v=function(a){if(this.profile.c(a.name)>=0){return true}return false};o.prototype.P=function(a,b){if(b==gddIdOK){if(this.addButton.enabled){if(!this.u()){return false}}this.onOk(this.profile)}return true};o.prototype.show=function(a){var b=this;a.OnClose=function(c,d){return b.P(c,d)};a.AddControl(gddWndCtrlClassLabel,0,"",
strings.OPTIONS_INSTRUCTIONS,10,15,460,90);this.maxReachedLabel=a.AddControl(gddWndCtrlClassLabel,0,"","",120,55,350,20);a.AddControl(gddWndCtrlClassLabel,0,"",strings.OPTIONS_COUNTRY,10,75,120,20);this.countriesDropList=a.AddControl(gddWndCtrlClassList,gddWndCtrlTypeListDrop,"countriesDropList",N,120,75,250,360);this.countriesDropList.value=Va($);this.countriesDropList.onChanged=function(c,d){b.Q(c,d)};a.AddControl(gddWndCtrlClassLabel,0,"",strings.OPTIONS_CITY_STATE,10,100,120,30);this.cityEditBox=
a.AddControl(gddWndCtrlClassEdit,0,"cityEditBox","",120,100,250,23);this.cityEditBox.onChanged=function(c,d){b.O(c,d)};a.AddControl(gddWndCtrlClassLabel,0,"",strings.OPTIONS_CITY,10,125,120,20);this.citiesDropList=a.AddControl(gddWndCtrlClassList,gddWndCtrlTypeListDrop,"citiesDropList",[],120,125,250,360);this.citiesDropList.onChanged=function(c,d){b.N(c,d)};this.l(true);this.locationsOpenList=a.AddControl(gddWndCtrlClassList,gddWndCtrlTypeListOpen,"locationsOpenList",[],10,150,360,145);this.locationsOpenList.onChanged=
function(c,d){b.R(c,d)};this.farenheitButton=a.AddControl(gddWndCtrlClassButton,gddWndCtrlTypeButtonCheck,"farenheitButton",strings.OPTIONS_FAHRENHEIT,10,300,100,20);this.celsiusButton=a.AddControl(gddWndCtrlClassButton,gddWndCtrlTypeButtonCheck,"celsiusButton",strings.OPTIONS_CELSIUS,120,300,100,20);this.farenheitButton.onClicked=function(c,d){b.w(c,d)};this.celsiusButton.onClicked=function(c,d){b.w(c,d)};this.addButton=a.AddControl(gddWndCtrlClassButton,gddWndCtrlTypeButtonPush,"addButton",strings.OPTIONS_ADD,
375,125,107,20);this.addButton.onClicked=function(c,d){b.M(c,d)};this.removeButton=a.AddControl(gddWndCtrlClassButton,gddWndCtrlTypeButtonPush,"removeButton",strings.OPTIONS_REMOVE,375,150,107,20);this.removeButton.onClicked=function(c,d){b.W(c,d)};this.moveUpButton=a.AddControl(gddWndCtrlClassButton,gddWndCtrlTypeButtonPush,"moveUpButton",strings.OPTIONS_MOVE_UP,375,240,107,20);this.moveUpButton.onClicked=function(c,d){b.V(c,d)};this.moveDownButton=a.AddControl(gddWndCtrlClassButton,gddWndCtrlTypeButtonPush,
"moveDownButton",strings.OPTIONS_MOVE_DOWN,375,265,107,20);this.moveDownButton.onClicked=function(c,d){b.U(c,d)};this.j(this.profile.b);this.h();this.g()};o.prototype.w=function(a,b){if(b==this.farenheitButton){this.j(false)}else if(b==this.celsiusButton){this.j(true)}};o.prototype.Q=function(a,b){this.citiesDropList.text=[];var c=b.value,d=Ua(c);if(d==$){this.l(true);this.f()}else{this.l(false);this.addButton.enabled=false;this.Y(d)}};o.prototype.C=function(a,b,c){if(a){var d=new s;d.name=b;if(!d.name){d.name=
this.cityEditBox.value}if(!c){debug.trace("City (no zip): "+b);d.type=s.CITY;d.value=b}else{debug.trace("Zip: "+c);d.type=s.ZIP;d.value=c}if(this.v(d)){var e=na(strings.ALREADY_EXISTS,strings.ALREADY_EXISTS_PH,d.name);view.alert(e);return false}this.d(d);this.j(false);this.cityEditBox.value="";return true}else{view.alert(strings.INVALID_OPTION_MSG);return false}return false};o.prototype.M=function(a,b){this.u()};o.prototype.u=function(){var a=new s;if(this.m()){var b=Ta(this.cityEditBox.value,this.language);
return this.C(b.isSuccess,b.city,b.postalCode)}else{a.type=s.LATLONG;var c=this.I(this.citiesDropList.value),d=c.latitude+","+c.longitude;a.name=this.citiesDropList.value+", "+this.countriesDropList.value;a.value=d;if(this.v(a)){var e=na(strings.ALREADY_EXISTS,strings.ALREADY_EXISTS_PH,a.name);view.alert(e);return false}this.d(a);this.j(true);this.citiesDropList.value=o.BLANK_SPACE;this.f();return true}return false};o.prototype.O=function(a,b){this.f()};o.prototype.N=function(a,b){this.f()};o.prototype.R=
function(a,b){this.g()};o.prototype.d=function(a){this.profile.d(a);this.h();this.locationsOpenList.value=a.name;this.g()};o.prototype.W=function(a,b){var c=this.locationsOpenList.value,d=this.profile.c(c);if(d>=0){this.profile.z(d);this.h();if(d>=1){this.locationsOpenList.value=this.profile.locationList[d-1].name}this.g()}};o.prototype.V=function(a,b){var c=this.locationsOpenList.value;this.profile.L(c);this.h();this.locationsOpenList.value=c;this.g()};o.prototype.U=function(a,b){var c=this.locationsOpenList.value;
this.profile.K(c);this.h();this.locationsOpenList.value=c;this.g()};
