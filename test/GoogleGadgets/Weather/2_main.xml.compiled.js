
var N,x,$="US";function Wa(a,b,c){var d=I+"ig/countries?output=xml&hl="+a,e=new XMLHttpRequest;e.onreadystatechange=l;e.open("GET",d,true);e.send();function g(m){if(c){c(m)}}function l(){if(e.readyState!=4){return}if(e.status!=200){g();return}var m=ma();m.loadXML(e.responseText);try{var j=m.getElementsByTagName("countries")[0].getElementsByTagName("country");if(j.length===0){g()}N=[];x=[];for(var r=0;r<j.length;++r){var w=q(j[r],"name"),B=q(j[r],"iso_code");N[r]=w;x[r]={name:w,iso:B}}N.sort();b(N,
x)}catch(v){debug.error("Error loading country list: "+v.message);g(v)}}}function Ua(a){if(!x||x.length===0){debug.error("CountryName list is empty!");return}for(var b=0;b<x.length;++b){if(x[b].name==a){return x[b].iso}}debug.error("Country ISO not found")}function Va(a){if(!x||x.length===0){debug.error("Country list is empty!");return}for(var b=0;b<x.length;++b){if(x[b].iso==a){return x[b].name}}debug.error("Country not found")}function ra(a,b,c,d){var e=I+"ig/cities?output=xml&hl="+b+"&country="+
a,g=new XMLHttpRequest;g.onreadystatechange=m;g.open("GET",e,true);g.send();function l(j){if(d){d(j)}}function m(){if(g.readyState!=4){return}if(g.status!=200){l();return}var j=ma();j.loadXML(g.responseText);try{var r=j.getElementsByTagName("cities")[0].getElementsByTagName("city"),w=[],B=[];for(var v=0;v<r.length;++v){var Q=false;if(r[v].getAttribute("default")){Q=true}var A=q(r[v],"name");A=A.replace(/\\x27/g,"'");var G=q(r[v],"latitude_e6"),Z=q(r[v],"longitude_e6");w[v]=A;B[v]={name:A,isDefault:Q,
latitude:G,longitude:Z}}w.sort();c(w,B)}catch(Oa){debug.error("Error loading city list: "+Oa.message);l(Oa)}}}function pa(a,b){return I+"ig/api?hl="+a+"&weather="+b}function Sa(a,b,c,d){var e=pa(b,a),g=new XMLHttpRequest;g.onreadystatechange=l;g.open("GET",e,true);g.send();function l(){if(g.readyState!=4){return}if(g.status!=200){if(d){d()}return}var m=qa(g.responseText);c(m.isSuccess,m.city,m.postalCode)}}function R(){return{isSuccess:false,city:"",postalCode:""}}function qa(a){var b=ma();b.loadXML(a);
try{var c=b.getElementsByTagName("weather"),d=c[0].getElementsByTagName("problem_cause");if(d&&d.length==1){return R()}else{var e=c[0].getElementsByTagName("forecast_information")[0],g=q(e,"city"),l=q(e,"postal_code");return{isSuccess:true,city:g,postalCode:l}}}catch(m){debug.error("Error parsing city: "+m.message)}return R()}function Ta(a,b){var c=pa(b,a),d=new XMLHttpRequest;try{d.open("GET",c,false);d.send()}catch(e){return R()}if(d.status!=200){return R()}return qa(d.responseText)};
