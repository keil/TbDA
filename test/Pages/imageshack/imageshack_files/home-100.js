function highlight(field){field.focus();field.select()}var recorder_saved_html="";var media_type;function disableme(what){what=document.getElementById(what);what.disabled=true;what.value="uploading..."}function showoptions(what){var disableswf=($("#c").val()=="")?false:true;var ext=what.value.substr(what.value.length-3,3).toLowerCase();media_type="";switch(ext){case"ico":case"jpg":case"peg":case"png":case"gif":case"bmp":case"tif":case"iff":media_type="image";case"flv":case"mp4":case"wmv":case"3gp":case"avi":case"mov":case"mkv":media_type=(media_type!="image")?"video":"image";var o=document.getElementById("upload-options-resizing");if(media_type=="video"){if(!get("toggle1").checked){get("upform").action="videoupload.php"}hide("resizeoptions");o.style.color="#BBBBBB";get("column-left").style.height=BASE_HEIGHT+"px"}else{o.style.color="#003399"}hide("filetypeerror");document.getElementById("butan").disabled=false;break;case"swf":if(disableswf){document.getElementById("butan").disabled=true;show("filetypeerror")}else{hide("filetypeerror");document.getElementById("butan").disabled=false}break;case"pdf":hide("resizeoptions");hide("filetypeerror");document.getElementById("butan").disabled=false;break;case"":document.getElementById("butan").disabled=true;default:hide("resizeoptions");show("filetypeerror");document.getElementById("butan").disabled=true;break}}var FLASH_OFFSET=28;var OPTIONS_OFFSET=98;var BASE_HEIGHT=248;var column_height_changed=false;var fileno_added=0;var cur_toggle=0;function toggleuploadmode(mode){document.getElementById("butan").value="host it!";document.getElementById("butan").disabled=false;document.getElementById("toggle"+mode).checked=true;cur_toggle=mode;switch(mode){case 0:hide("upurl");hide("upvideo");hide("swfbutan");hide("recorder");hide("snapshot");$("#upflash").hide();$("#upflash embed").width(0).height(0);if(fileno_added!=0&&column_height_changed){$("#column-left").height($("#column-left").height()-FLASH_OFFSET);column_height_changed=false}if(get("optional_area1")){optional_release()}show("regtags");show("butan_wrap");get("upform").action=$("#actionman").val();show("butan");show("filetypeallowed");show("upfile","block");break;case 1:hide("upfile");hide("upvideo");$("#upflash").width(0).height(0);$("#upflash embed").width(0).height(0);if(fileno_added!=0&&column_height_changed){$("#column-left").height($("#column-left").height()-FLASH_OFFSET);column_height_changed=false}show("upurl","block");show("regtags");show("butan_wrap");show("butan");hide("swfbutan");get("upform").action="http://post.imageshack.us/transload.php";hide("recorder");show("filetypeallowed");hide("snapshot");get("transurl").disabled=false;if(get("snapurl")){get("snapurl").disabled=true}if(get("optional_area1")){optional_release()}break;case 2:hide("upfile");hide("upurl");$("#upflash").width(0).height(0);$("#upflash embed").width(0).height(0);if(fileno_added!=0&&column_height_changed){$("#column-left").height($("#column-left").height()-FLASH_OFFSET);column_height_changed=false}show("upvideo","block");hide("regtags");hide("butan");hide("butan_wrap");hide("swfbutan");hide("recorder");show("filetypeallowed");hide("snapshot");break;case 3:hide("upfile");hide("upurl");hide("upvideo");$("#upflash").height("").width("");$("#upflash embed").height("").width("");show("regtags");hide("butan");hide("butan_wrap");show("swfbutan");hide("recorder");show("filetypeallowed");hide("snapshot");if(get("optional_area1")){if(fileno_added==0){optional_getup();if($("#column-left").height()<BASE_HEIGHT+5){column_height_changed=false}}else{optional_release();if(!column_height_changed){$("#column-left").height($("#column-left").height()+FLASH_OFFSET);column_height_changed=true}}}break;case 4:hide("upfile","block");hide("upurl");hide("upvideo");$("#upflash").width(0).height(0);$("#upflash embed").width(0).height(0);if(fileno_added!=0&&column_height_changed){$("#column-left").height($("#column-left").height()-FLASH_OFFSET);column_height_changed=false}hide("regtags");hide("butan_wrap");get("upform").action=$("#actionman").val();hide("butan");hide("swfbutan");show("recorder");hide("filetypeallowed");hide("snapshot");break;case 5:hide("upfile");hide("upurl");hide("upvideo");$("#upflash").width(0).height(0);$("#upflash embed").width(0).height(0);if(fileno_added!=0&&column_height_changed){$("#column-left").height($("#column-left").height()-FLASH_OFFSET);column_height_changed=false}hide("regtags");show("butan_wrap");show("butan");hide("swfbutan");hide("recorder");hide("filetypeallowed");show("snapshot");get("transurl").disabled=true;get("snapurl").disabled=false;document.getElementById("upform").action="http://imageshack.us/snapshot.php";break;case 6:$("#webcam_dialog").dialog("open");recorder_saved_html=$("#webcam_dialog").html();record_init();break}}function toggleuploadmode2(file){if(file){show("upfile");hide("upzip");document.getElementById("upform").action="http://imageshack.us/index.php"}else{hide("upfile");show("upzip");document.getElementById("upform").action="http://imageshack.us/ie.php"}}function focusfield(fl){if(fl.value=="Paste image url here"){fl.value="";fl.style.color="black"}}function checkemail(){var ex_obj=document.getElementById("email-optional");if(ex_obj){focusoption(ex_obj)}ex_obj=document.getElementById("tags");if(ex_obj){focusoption(ex_obj)}ex_url=document.getElementById("transurl");if(ex_url){focusoption(ex_url)}if(get("toggle5")&&get("toggle5").checked){var u=get("snapurl").value;if(u==""||u=="paste website url here"){alert("Please enter website address");return false}disableme("butan");return true}var e_obj=document.getElementById("email-optional");if(!e_obj){disableme("butan");return true}var email=e_obj.value;if(email.length==0){disableme("butan");return true}var filter=/^[^@]+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z]{2,4})+$/;var ret=filter.test(email);if(!ret){alert("Please enter valid email address");return false}disableme("butan");return true}function opentags(){show("addtags");hide("autoreg")}function openemail(){show("autoreg");hide("addtags")}function show(id,type){var o=document.getElementById(id);if(o){o.style.display=type||""}}function show(id){var o=document.getElementById(id);if(o){o.style.display=""}}function hide(id){var o=document.getElementById(id);if(o){o.style.display="none"}}function uploadstart(){var o=document.getElementById("uploader");var ctrl=document.getElementById("email-optional");var optsize="";if(ctrl){focusoption(ctrl);if(ctrl.value!=""){if(!is_email_correct(ctrl.value)){error_msg($("#errormsg3").val());return false}o.SetVariable("email",ctrl.value)}document.getElementById("hideregister").value=ctrl.value!=""?"yes":""}ctrl=document.getElementById("tags");if(ctrl){focusoption(ctrl);if(ctrl.value!=""){var tags=ctrl.value.split(" ");var str="";for(i=0;i<tags.length;i++){if(tags[i]==""){continue}else{str+=tags[i]+","}}str=str.substr(0,str.length-1);o.SetVariable("tags",str)}}ctrl=document.getElementById("optsize");if(ctrl){optsize=ctrl.options[ctrl.selectedIndex].value;o.SetVariable("optsize",optsize)}ctrl=document.getElementById("optimage");if(ctrl){o.SetVariable("optimage",optsize!="resample"?"1":"");ctrl.value=optsize!="resample"?"1":""}ctrl=document.getElementById("rembar");if(ctrl){o.SetVariable("rembar",ctrl.options[ctrl.selectedIndex].value)}var c=get_cookie("myimages");if(c&&c!=""){o.SetVariable("cookie",c)}else{o.SetVariable("cookie","")}o.SetVariable("go","1")}function uploadcomplete(args,par,ret_cookie,already_registered){var video_extensions="MP4 MOV 3GPP MKV WMV AVI";var videos=0,images=0,mixed=false;var tokens=args.split(",");var o=document.getElementById("swfpostcontainer");o.innerHTML="";var counter=0;for(var i=0;i<tokens.length;++i){var parts=tokens[i].split("/");if(parts.length!=3){continue}var e=document.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name","id[]");e.setAttribute("value",tokens[i]);o.appendChild(e);counter++;var curr_file_extension=tokens[i].substr(tokens[i].length-4,tokens[i].length);curr_file_extension=curr_file_extension.replace(".","").toUpperCase();if(video_extensions.indexOf(curr_file_extension)!=-1){videos++}else{images++}if(videos!=0&&images!=0){mixed=true}}if(counter==0){alert("No files were uploaded")}else{if(ret_cookie){var e=document.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name","cookie");e.setAttribute("value",ret_cookie);o.appendChild(e);set_cookie("myimages",ret_cookie,365,".imageshack.us");var isuser=get_cookie("isUSER");if(isuser!=null&&isuser.length>0){set_cookie("isUSER",isuser,365,".imageshack.us")}else{set_cookie("isUSER","-----",365,".imageshack.us")}}if(already_registered=="y"){var e=document.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name","email_already_registered");e.setAttribute("value",already_registered);o.appendChild(e);document.getElementById("swfpostform").action="/"}var c=get_cookie("myimages");if(c&&c!=""&&images>1&&!mixed){location.href="http://my.imageshack.us/v_images.php"}else{if(c&&c!=""&&videos>1&&!mixed){location.href="http://my.imageshack.us/video/my_videos.php"}else{document.getElementById("swfpostform").submit()}}}}var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1){return data[i].identity}}else{if(dataProp){return data[i].identity}}}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1){return}return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();var FlashDetect=new function(){var self=this;self.installed=false;self.raw="";self.major=-1;self.minor=-1;self.revision=-1;self.revisionStr="";var activeXDetectRules=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(obj){return getActiveXVersion(obj)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(obj){var version="6,0,21";try{obj.AllowScriptAccess="always";version=getActiveXVersion(obj)}catch(err){}return version}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(obj){return getActiveXVersion(obj)}}];var getActiveXVersion=function(activeXObj){var version=-1;try{version=activeXObj.GetVariable("$version")}catch(err){}return version};var getActiveXObject=function(name){var obj=-1;try{obj=new ActiveXObject(name)}catch(err){obj={activeXError:true}}return obj};var parseActiveXVersion=function(str){var versionArray=str.split(",");return{raw:str,major:parseInt(versionArray[0].split(" ")[1],10),minor:parseInt(versionArray[1],10),revision:parseInt(versionArray[2],10),revisionStr:versionArray[2]}};var parseStandardVersion=function(str){var descParts=str.split(/ +/);var majorMinor=descParts[2].split(/\./);var revisionStr=descParts[3];return{raw:str,major:parseInt(majorMinor[0],10),minor:parseInt(majorMinor[1],10),revisionStr:revisionStr,revision:parseRevisionStrToInt(revisionStr)}};var parseRevisionStrToInt=function(str){return parseInt(str.replace(/[a-zA-Z]/g,""),10)||self.revision};self.majorAtLeast=function(version){return self.major>=version};self.minorAtLeast=function(version){return self.minor>=version};self.revisionAtLeast=function(version){return self.revision>=version};self.versionAtLeast=function(major){var properties=[self.major,self.minor,self.revision];var len=Math.min(properties.length,arguments.length);for(i=0;i<len;i++){if(properties[i]>=arguments[i]){if(i+1<len&&properties[i]==arguments[i]){continue}else{return true}}else{return false}}};self.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&mimeTypes[type].enabledPlugin.description){var version=mimeTypes[type].enabledPlugin.description;var versionObj=parseStandardVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revisionStr=versionObj.revisionStr;self.revision=versionObj.revision;self.installed=true}}else{if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var version=-1;for(var i=0;i<activeXDetectRules.length&&version==-1;i++){var obj=getActiveXObject(activeXDetectRules[i].name);if(!obj.activeXError){self.installed=true;version=activeXDetectRules[i].version(obj);if(version!=-1){var versionObj=parseActiveXVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revision=versionObj.revision;self.revisionStr=versionObj.revisionStr}}}}}}()};FlashDetect.JS_RELEASE="1.0.4";var always_opt=get_cookie("always_opt");if(always_opt&&always_opt!="-1"&&always_opt!="resample"){get("column-left").style.height=get("column-left").offsetHeight+OPTIONS_OFFSET+"px";show("resizeoptions")}if(cur_toggle==0&&$("#no_multi").val()!="1"){if(!FlashDetect.installed){location.href="http://imageshack.us/?no_multi=1"}}if(cur_toggle==0&&BrowserDetect.OS=="Linux"){$("#linux_hack").css("display","block");$("#uploadform").css("margin-top","0px");$("#fileupload").attr("size",44)}function toggle_upload_options(){if(media_type=="video"){return}if($("#resizeoptions").css("display")=="none"){get("column-left").style.height=get("column-left").offsetHeight+OPTIONS_OFFSET+"px";show("resizeoptions")}else{hide("resizeoptions");if(fileno_added==0||cur_toggle!=3){get("column-left").style.height=BASE_HEIGHT+"px"}else{get("column-left").style.height=BASE_HEIGHT+FLASH_OFFSET+"px"}}}function optional_release(){get("optional_area1").style.top="";get("optional_area2").style.top=""}function optional_getup(){get("optional_area1").style.top="-"+FLASH_OFFSET+"px";get("optional_area2").style.top="-"+FLASH_OFFSET+"px";var height=get("column-left").offsetHeight-FLASH_OFFSET;if($("#resizeoptions").css("display")!="none"&&height<BASE_HEIGHT+OPTIONS_OFFSET){height=BASE_HEIGHT+OPTIONS_OFFSET}if(height<BASE_HEIGHT){height=BASE_HEIGHT}get("column-left").style.height=height+"px"}function browse_click(){}function cancel_click(){}function file_added(n,k){var extend=fileno_added==0;fileno_added=k;if(extend){optional_release();$("#column-left").height($("#column-left").height()+FLASH_OFFSET)}column_height_changed=true;if(pageTracker){pageTracker._trackEvent("new-home-click","homepage-browse(file_added)-btn")}if($("#c").val()==""){setTimeout(function(){$("#email-optional").focus()},10);$("#email-optional").focus()}else{setTimeout(function(){$("#tags").focus()},10);$("#tags").focus()}}function file_removed(n,k){fileno_added=k;if(fileno_added==0){optional_getup()}}function uploaderror(message){alert(message)}function uploadcancel(){if(fileno_added!=0){optional_getup();fileno_added=0;column_height_changed=false}}$(document).ready(function(){$("#webcam_dialog").dialog({closeOnEscape:false,beforeclose:function(e,u){$("#webcam_dialog").html('<div id="recorder"></div>');if($("#no_multi").val()=="1"){toggleuploadmode(0)}else{toggleuploadmode(3)}},draggable:false,autoOpen:false,modal:true,resizable:false,width:510,height:420,open:function(){$(".ads").hide();$(".flash").hide()},close:function(){$(".ads").show();$(".flash").show();$("#webcam_dialog").html(recorder_saved_html)}});$("#webcam_close").live("click",function(){$("#webcam_dialog").dialog("close");$("#webcam_dialog").html(recorder_saved_html)});$("#webcam_help_close").live("click",function(){$("#webcam_help_dialog").dialog("close");record_init()});$("#webcam_help_dialog").dialog({closeOnEscape:false,draggable:false,autoOpen:false,modal:true,resizable:false,scroll:true,width:580,height:490,open:function(){$("#webcam_dialog").hide()},close:function(){$("#webcam_dialog").show();record_init()}});$("#help_link").live("click",function(){if($("#webcam_help_dialog #help_text").html()==""){$.get("camera_help.html",function(res){$("#webcam_help_dialog #help_text").html(res)})}$("#webcam_help_dialog").dialog("open")});$("#uploadstart").bind("click",function(){check_email_submit(1)});$("#uploader,#fileupload,#tags,#email-optional,#transurl").bind("keydown",function(e){var code=(e.keyCode?e.keyCode:e.which);if(code==13){switch($(this).attr("id")){case"uploader":$("#uploadstart").click();break;case"fileupload":case"transurl":$("#butan").click();break;case"tags":case"email-optional":if($("#upflash").css("display")!="none"){$("#uploadstart").click()}else{$("#butan").click()}break}e.stopPropagation();e.preventDefault()}});$("#butan").bind("click",function(){var ex_obj=document.getElementById("email-optional");if(ex_obj){focusoption(ex_obj)}ex_obj=document.getElementById("tags");if(ex_obj){focusoption(ex_obj)}ex_url=document.getElementById("transurl");if(ex_url){focusoption(ex_url)}check_email_submit(2)});$("#fileupload").bind("change",function(e){if($("#c").val()==""){setTimeout(function(){$("#email-optional").focus()},10);$("#email-optional").focus()}else{setTimeout(function(){$("#tags").focus()},10);$("#tags").focus()}})});function error_msg($msg){if(jQuery("#error_msg")){jQuery("#ff30_hack").css("display","none");jQuery("#linux_hack").css("display","none");jQuery("#uploadform").css("margin-top","5px");jQuery("#error_msg").css("display","inline").html($msg)}}check_email_submit=function(func){focusoption(document.getElementById("email-optional"));var email=jQuery.trim($("#email-optional").val());if(email!=""){if(!is_email_correct(email)){error_msg($("#errormsg3").val());return false}jQuery("#email-check-loader").css("display","inline");var api_url="/registration/checkemail.php";jQuery.get(api_url,{email:email},function(r){jQuery("#email-check-loader").css("display","none");if(r.error==0){if(func==1){uploadstart()}else{if(func==2){if($("#transurl").val()!=""||$("#fileupload").val()!=""){$("#upform").submit()}}}}else{if(r.error==3){error_msg($("#errormsg3").val());return false}else{if(r.error==4){var errmsg=$("#errormsg4").val()+"   <div style='display:inline'><a href='#' id='btnlogin2'>"+$("#str_login").val()+"</a> | <a href='http://my.imageshack.us/registration/passwordrecovery.php'>"+$("#str_forgotpass").val()+"</a></div>";error_msg(errmsg);return false}else{error_msg($("#errormsg5").val());return false}}}},"json");jQuery("#email-check-loader").css("display","none")}else{if(func==1){uploadstart()}else{if(func==2){if($("#transurl").val()!=""||$("#fileupload").val()!=""){$("#upform").submit()}}}}};function record_init(){var cookie=get_cookie("myimages");if(!cookie){cookie=""}var params={align:"middle",bgcolor:"#FFFFFF",allowScriptAccess:"always",wmode:"window",swliveconnect:true,allowNetworking:"external",flashvars:"serverURL=rtmp://render3.imageshack.us/recorder/stream"+Math.random()+"&imgURL=http://imageshack.us/stillshot.php?cookie="+cookie+"&localXML=http://imageshack.us/recorder.v2.xml&cookie="+cookie+"&openw=selfnavigate"};var attributes={id:"recorder",name:"recorder"};swfobject.embedSWF("recorder.v2.swf","recorder",480,320,"9.0.28.0","expressInstall.swf",{},params,attributes)}function track(type){new Image().src="http://img1.imageshack.us/pixel.gif?"+type}function showHelp(flag,context){if(flag){$("#help-text").html(context);$("#help-area").css("display","block")}else{$("#help-area").css("display","none")}}var NUM_WAYS=2;function display_uploadtools(){var selected_tool=Math.floor(Math.random()*NUM_WAYS);if(get("upload-tools"+selected_tool)){get("upload-tools"+selected_tool).style.display="block"}}display_uploadtools();function is_email_correct(value){var filter=/^[^@]+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z]{2,4})+$/;return filter.test(value)}function setFocus_FF_MAC(obj){if(navigator.userAgent.indexOf("Firefox")>0&&navigator.userAgent.indexOf("Mac")>0){obj.focus();obj.focus()}}function change_optsize(obj){var always_opt=get_cookie("always_opt");if(obj.value&&obj.value!=always_opt){set_cookie("always_opt",obj.value,365,".imageshack.us")}}function get_cookie(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0){return null}}else{begin+=2}var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length}return unescape(dc.substring(begin+prefix.length,end))}function get(id){return document.getElementById(id)};